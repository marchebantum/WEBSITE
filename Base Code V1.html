<html lang="en"><head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zenias | Digital Renaissance</title>
<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&amp;family=Inter:wght@200;300;400&amp;family=JetBrains+Mono:wght@200;300;400&amp;display=swap" rel="stylesheet">
<!-- Tailwind & Icons -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script src="js/gsap/gsap.min.js"></script>
    <script src="js/gsap/ScrollTrigger.min.js"></script>
    <script src="js/gsap/Flip.min.js"></script>
    <script>
    tailwind.config = {
theme: {
extend: {
fontFamily: {
sans: ['Inter', 'sans-serif'],
serif: ['Cormorant Garamond', 'serif'],
mono: ['JetBrains Mono', 'monospace'],
},
colors: {
paper: '#FDFCF8',
ink: '#1C1917',
sepia: '#78350F',
stone: '#E7E5E4',
rust: '#9A3412'
},
animation: {
'fade-in': 'fadeIn 1.2s ease-out forwards',
'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
},
keyframes: {
fadeIn: {
'0%': { opacity: '0', transform: 'translateY(10px)' },
'100%': { opacity: '1', transform: 'translateY(0)' },
}
}
}
}
}
</script>
<style>
body {
margin: 0;
overflow: hidden;
background-color: #CECECE;
color: #1C1917;
}
/* Scroll-in animation */
@keyframes animationIn {
  0% {
    opacity: 0;
    transform: translateY(30px);
    filter: blur(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0px);
  }
}
/* Custom Range Slider - Minimalist/Paper style */
input[type=range] { -webkit-appearance: none; appearance: none; width: 100%; background: transparent; }
input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none; appearance: none; height: 12px; width: 12px;
background: #1C1917; border: 1px solid #FDFCF8;
cursor: pointer; margin-top: -5px;
box-shadow: 0 2px 4px rgba(0,0,0,0.1);
transition: transform 0.2s ease;
}
input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }
input[type=range]::-webkit-slider-runnable-track {
width: 100%; height: 1px; cursor: pointer; background: #D6D3D1;
}
input[type=range]:focus { outline: none; }
/* Glass Panel with "Vellum" feel */
.vellum-glass {
background: rgba(253, 252, 248, 0.85);
backdrop-filter: blur(12px);
-webkit-backdrop-filter: blur(12px);
border: 1px solid rgba(28, 25, 23, 0.08);
box-shadow:
0 4px 6px -1px rgba(0, 0, 0, 0.02),
0 20px 40px -4px rgba(28, 25, 23, 0.05);
}
/* Utility */
::selection { background: #E7E5E4; color: #1C1917; }
.thin-border { border: 1px solid rgba(28, 25, 23, 0.1); }
/* Hardware Acceleration for Animations */
.works-card, .works-pillar, #works-intro, #works-four-things, #works-title-digital, #works-title-renaissance {
    will-change: transform, opacity, filter;
}
/* Da Vinci Grid Overlay */
.grid-overlay {
background-size: 40px 40px;
background-image:
linear-gradient(to right, rgba(28, 25, 23, 0.08) 1px, transparent 1px),
linear-gradient(to bottom, rgba(28, 25, 23, 0.08) 1px, transparent 1px);
mask-image: radial-gradient(circle at center, black 40%, transparent 80%);
}
.grid-overlay-strong {
background-size: 40px 40px;
background-image:
linear-gradient(to right, rgba(28, 25, 23, 0.12) 1px, transparent 1px),
linear-gradient(to bottom, rgba(28, 25, 23, 0.12) 1px, transparent 1px);
mask-image: radial-gradient(circle at center, black 60%, transparent 95%);
}
/* SVG Line Animation */
.sketch-line {
stroke: #78350F; stroke-width: 0.8;
stroke-dasharray: 4, 4; opacity: 0.4;
}

/* Strategic circular graph */
.circle-chart {
    transform: rotate(-90deg);
    transform-origin: center;
}

.progress-circle {
    stroke-dasharray: var(--circumference);
    stroke-dashoffset: var(--circumference);
    animation: progressAnimation 1.6s ease-out forwards;
}

@keyframes progressAnimation {
    0% { stroke-dashoffset: var(--circumference); }
    100% { stroke-dashoffset: var(--dash-offset); }
}

/* Pragmatic timeline animation */
.pragmatic-timeline {
    --timeline-cycle: 4.2s;
    --launch-fly: -170px;
}

.pragmatic-line-active {
    width: 0%;
    z-index: 10;
    will-change: width;
    position: relative;
}

/* Tree Component Styles */
.tree-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    cursor: pointer;
    transition: background-color 0.2s;
    font-size: 11px;
    user-select: none;
    color: #1C1917;
}
.tree-item:hover {
    background-color: rgba(28, 25, 23, 0.05);
}
.tree-item.selected {
    background-color: rgba(28, 25, 23, 0.08);
    font-weight: 500;
}
.tree-folder-icon {
    width: 14px;
    height: 14px;
    color: #78350F;
    transition: transform 0.2s;
}
.tree-folder-icon.collapsed {
    transform: rotate(-90deg);
}
.tree-children {
    display: none;
    flex-direction: column;
    gap: 2px;
}
.tree-children.expanded {
    display: flex;
}
#tree-root {
    scrollbar-width: thin;
    scrollbar-color: rgba(28, 25, 23, 0.2) transparent;
}
#tree-root::-webkit-scrollbar {
    width: 4px;
}
#tree-root::-webkit-scrollbar-thumb {
    background: rgba(28, 25, 23, 0.2);
    border-radius: 10px;
}

/* Glowing head for the timeline line */
.pragmatic-line-active::after {
    content: '';
    position: absolute;
    right: -4px;
    top: 50%;
    transform: translateY(-50%);
    width: 10px;
    height: 10px;
    background: #10b981;
    border-radius: 50%;
    box-shadow: 0 0 15px #10b981, 0 0 5px #fff;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.pragmatic-timeline.is-animating .pragmatic-line-active::after {
    opacity: 1;
}

.pragmatic-label {
    display: inline-block;
    transform: translateY(0);
    will-change: transform;
    transition: all 0.3s ease;
}

.pragmatic-phase {
    transform: translate(-50%, -120%) rotate(-35deg);
    transform-origin: bottom center;
}

.pragmatic-phase-text {
    display: inline-block;
    transform: translateY(0) scale(1);
    transform-origin: center;
    will-change: transform;
}

.pragmatic-launch {
    display: inline-block;
    will-change: transform, opacity;
}

.pragmatic-timeline.is-animating .pragmatic-line-active {
    animation: timelineSweep var(--timeline-cycle) linear infinite;
}

.pragmatic-timeline.is-animating .pragmatic-phase-1 {
    animation: timelinePhase1 var(--timeline-cycle) linear infinite;
}

.pragmatic-timeline.is-animating .pragmatic-phase-2 {
    animation: timelinePhase2 var(--timeline-cycle) linear infinite;
}

.pragmatic-timeline.is-animating .pragmatic-phase-3 {
    animation: timelinePhase3 var(--timeline-cycle) linear infinite;
}

.pragmatic-timeline.is-animating .pragmatic-phase-4 {
    animation: timelinePhase4 var(--timeline-cycle) linear infinite;
}

.pragmatic-timeline.is-animating .pragmatic-dot-1 {
    animation: dotPulse1 var(--timeline-cycle) linear infinite;
}

.pragmatic-timeline.is-animating .pragmatic-dot-2 {
    animation: dotPulse2 var(--timeline-cycle) linear infinite;
}

.pragmatic-timeline.is-animating .pragmatic-dot-3 {
    animation: dotPulse3 var(--timeline-cycle) linear infinite;
}

.pragmatic-timeline.is-animating .pragmatic-dot-4 {
    animation: dotPulse4 var(--timeline-cycle) linear infinite;
}

@keyframes timelineSweep {
    0% { width: 0%; opacity: 0.8; }
    5% { opacity: 1; }
    95% { opacity: 1; }
    100% { width: 100%; opacity: 0; }
}

@keyframes dotPulse1 {
    0%, 10%, 100% { transform: scale(1) translate(-50%, -50%); box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
    12.5% { transform: scale(1.4) translate(-50%, -50%); box-shadow: 0 0 20px rgba(16, 185, 129, 0.8); }
    15% { transform: scale(1) translate(-50%, -50%); box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
}

@keyframes dotPulse2 {
    0%, 35%, 100% { transform: scale(1) translate(-50%, -50%); box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
    37.5% { transform: scale(1.4) translate(-50%, -50%); box-shadow: 0 0 20px rgba(16, 185, 129, 0.8); }
    40% { transform: scale(1) translate(-50%, -50%); box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
}

@keyframes dotPulse3 {
    0%, 60%, 100% { transform: scale(1) translate(-50%, -50%); box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
    62.5% { transform: scale(1.4) translate(-50%, -50%); box-shadow: 0 0 20px rgba(16, 185, 129, 0.8); }
    65% { transform: scale(1) translate(-50%, -50%); box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
}

@keyframes dotPulse4 {
    0%, 85%, 100% { transform: scale(1) translate(-50%, -50%); box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
    87.5% { transform: scale(1.4) translate(-50%, -50%); box-shadow: 0 0 20px rgba(16, 185, 129, 0.8); }
    90% { transform: scale(1) translate(-50%, -50%); box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
}

@keyframes timelinePhase1 {
    0%, 10%, 100% { transform: translateY(0) scale(1); opacity: 0.6; }
    12.5% { transform: translateY(-5px) scale(1.15); opacity: 1; }
    15% { transform: translateY(0) scale(1); opacity: 1; }
}

@keyframes timelinePhase2 {
    0%, 35%, 100% { transform: translateY(0) scale(1); opacity: 0.6; }
    37.5% { transform: translateY(-5px) scale(1.15); opacity: 1; }
    40% { transform: translateY(0) scale(1); opacity: 1; }
}

@keyframes timelinePhase3 {
    0%, 60%, 100% { transform: translateY(0) scale(1); opacity: 0.6; }
    62.5% { transform: translateY(-5px) scale(1.15); opacity: 1; }
    65% { transform: translateY(0) scale(1); opacity: 1; }
}

@keyframes timelinePhase4 {
    0%, 85%, 100% { transform: translateY(0) scale(1); opacity: 0.6; }
    87.5% { transform: translateY(-5px) scale(1.15); opacity: 1; }
    90% { transform: translateY(0) scale(1); opacity: 1; }
}

/* Service Tabs Custom Styles */
.service-tab-item {
    transition: all 0.3s ease;
    border-radius: 0px;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-top: none;
    border-bottom: none;
    position: relative;
    overflow: hidden;
}

.service-tab-item::before,
.service-tab-item::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    border-color: #9A3412;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 5;
}

.service-tab-item::before {
    top: 0;
    left: 0;
    border-top: 1px solid;
    border-left: 1px solid;
}

.service-tab-item::after {
    bottom: 0;
    right: 0;
    border-bottom: 1px solid;
    border-right: 1px solid;
}

.service-tab-item.active::before,
.service-tab-item.active::after,
.service-tab-item:hover::before,
.service-tab-item:hover::after {
    opacity: 1;
}

.service-tab-item .tab-label {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.50rem;
    color: #5a5a5a;
    transition: color 0.3s ease;
    position: relative;
    z-index: 2;
}

.service-tab-item .tab-num {
    color: #8b5a3c;
    transition: color 0.3s ease;
    font-size: 0.75rem;
    letter-spacing: 0.1em;
    opacity: 0.6;
}

.service-tab-item.active .tab-num {
    opacity: 1;
    font-weight: 600;
}

.service-tab-item:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.service-tab-item:hover .tab-label {
    color: #2a2a2a;
}

.service-tab-item.active {
    background: rgba(255, 255, 255, 0.25);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    border-top: 2px solid #DC2626; /* Brighter red */
    transform: none; /* No scale on active */
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
}

/* Scanline effect for active tab */
.service-tab-item.active::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(rgba(154, 52, 18, 0.04) 1px, transparent 1px);
    background-size: 100% 3px;
    pointer-events: none;
    z-index: 1;
}

/* Pulsing dot for active tab */
.service-tab-item-dot {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 4px;
    height: 4px;
    background: #9A3412;
    border-radius: 50%;
    box-shadow: 0 0 8px #9A3412;
    animation: pulse-dot 1.5s infinite;
    z-index: 10;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.service-tab-item.active .service-tab-item-dot {
    opacity: 1;
}

@keyframes pulse-dot {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.2); }
}

.service-tab-item.active .tab-label {
    color: #1a1a1a;
    font-weight: 700;
}

/* Character-by-character animation for carousel titles */
.char-slide {
    display: inline-block;
    opacity: 0;
    transform: translateY(-20px);
    animation: slideDown 0.5s ease-out forwards;
}

@keyframes slideDown {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Spinning node animations */
@keyframes spin-slow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes spin-reverse {
    from { transform: rotate(0deg); }
    to { transform: rotate(-360deg); }
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
}

@keyframes pulseDot {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 1; }
}

.connector {
    stroke-dasharray: 4;
    animation: dash 30s linear infinite;
}

@keyframes dash {
    to { stroke-dashoffset: 1000; }
}

.animate-pulse-dot {
    animation: pulseDot 2s ease-in-out infinite;
}

.fade-out {
    opacity: 0;
    transition: opacity 0.2s ease-out;
}

.fade-in {
    opacity: 1;
    transition: opacity 0.3s ease-in;
}

.animate-spin-slow {
    animation: spin-slow 20s linear infinite;
}

.animate-spin-reverse {
    animation: spin-reverse 15s linear infinite;
}

.animate-float {
    animation: float 3s ease-in-out infinite;
}

/* Clipped star decorative element */
.clipped-star-container {
    width: 120px;
    height: 120px;
    margin: 16px auto;
    opacity: 0.85;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    z-index: 15;
    animation: float 3s ease-in-out infinite;
}

.clipped-star-container:hover {
    opacity: 1;
}

.clipped-star-container.expanded {
    width: 240px;
    height: 240px;
    opacity: 1;
}

.clipped-star-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    clip-path: polygon(
        50% 0%, 
        61% 35%, 
        98% 35%, 
        68% 57%, 
        79% 91%, 
        50% 70%, 
        21% 91%, 
        32% 57%, 
        2% 35%, 
        39% 35%
    );
    transition: clip-path 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}
</style>
<script>
  // Animate-on-scroll helper
  (function () {
    const style = document.createElement("style");
    style.textContent = `
      .animate-on-scroll { animation-play-state: paused !important; }
      .animate-on-scroll.animate { animation-play-state: running !important; }
    `;
    document.head.appendChild(style);

    const once = true;
    if (!window.__inViewIO) {
      window.__inViewIO = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("animate");
            if (once) window.__inViewIO.unobserve(entry.target);
          }
        });
      }, { threshold: 0.2, rootMargin: "0px 0px -10% 0px" });
    }

    window.initInViewAnimations = function (selector = ".animate-on-scroll") {
      document.querySelectorAll(selector).forEach((el) => {
        window.__inViewIO.observe(el);
      });
    };

    document.addEventListener("DOMContentLoaded", () => initInViewAnimations());
  })();
</script></head>

<body class="antialiased font-sans bg-paper h-screen w-screen overflow-hidden">

    <!-- Subtle Grid Background -->
    <div class="absolute inset-0 pointer-events-none grid-overlay z-0"></div>

    <!-- Gradient Background Transition -->
    <div class="absolute inset-0 pointer-events-none z-[-1] bg-gradient-to-b from-paper via-paper to-[#e8e3db]"></div>

    <!-- Canvas -->
    <div id="canvas-container" class="absolute inset-0 z-1"></div>

    <!-- Header - Fixed across pages -->
    <header class="fixed top-0 left-0 right-0 z-50 flex justify-between items-center p-4 md:px-12 md:py-6 bg-paper/95 backdrop-blur-md border-b border-neutral-200/30 transition-all duration-300 shadow-[0_8px_30px_rgba(0,0,0,0.04)]">
        <div class="flex items-center gap-4 cursor-pointer" id="logo-home">
            <div class="w-10 h-10 border border-neutral-800 flex items-center justify-center rounded-sm bg-paper relative overflow-hidden">
                <img src="No BG BLACK.png" alt="Z Logo" class="w-8 h-8 object-contain">
            </div>
            <span class="font-serif text-4xl tracking-tight text-ink font-medium">Zenias</span>
        </div>

        <nav class="hidden md:flex items-center gap-10">
            <a href="#" id="nav-services" class="font-mono text-xs text-neutral-500 hover:text-ink transition-colors tracking-widest uppercase">Services</a>
            <a href="#" id="nav-works" class="font-mono text-xs text-neutral-500 hover:text-ink transition-colors tracking-widest uppercase">Works</a>
            <a href="#" id="nav-about" class="font-mono text-xs text-neutral-500 hover:text-ink transition-colors tracking-widest uppercase">About Us</a>
            <button id="nav-inquire" class="font-serif italic text-lg px-8 py-2 border border-transparent bg-[#4A1D0A] hover:bg-[#5A2D1A] transition-colors text-white rounded-full shadow-sm">
                Inquire
            </button>
        </nav>

        <!-- Mobile Menu Toggle -->
        <button id="mobile-menu-btn" class="md:hidden w-10 h-10 flex items-center justify-center">
            <!-- Lottie Animation Container -->
        </button>

        <!-- Subtle bottom blur transition -->
        <div class="absolute -bottom-12 left-0 right-0 h-12 bg-gradient-to-b from-paper/95 via-paper/50 to-transparent backdrop-blur-[1px] pointer-events-none"></div>
    </header>

    <!-- Main Content -->
    <main class="absolute inset-0 z-20 pointer-events-none p-6 md:p-12 h-full w-full">
        <div id="home-page" class="relative h-full w-full">
            <!-- Header removed from here -->

            <!-- Mobile Menu Overlay (Inline Expansion) -->
            <div id="mobile-menu" class="absolute top-32 right-6 flex flex-col items-end gap-4 md:hidden pointer-events-auto transition-all duration-300 opacity-0 translate-y-[-10px] invisible">
                <a href="#" id="mobile-services" class="font-serif text-xl text-ink hover:text-sepia transition-colors">Services</a>
                <a href="#" id="mobile-works" class="font-serif text-xl text-ink hover:text-sepia transition-colors">Works</a>
                <a href="#" id="mobile-about" class="font-serif text-xl text-ink hover:text-sepia transition-colors">About Us</a>
                <button class="font-serif italic text-lg px-6 py-1 border border-transparent bg-[#4A1D0A] text-white rounded-full">
                    Inquire
                </button>
            </div>

            <!-- Hero Text -->
            <div id="hero-block" class="absolute top-24 left-6 right-6 md:relative md:top-auto md:left-auto md:right-auto md:mt-[10vh] z-20 w-full max-w-4xl animate-fade-in opacity-0" style="animation-delay: 0.3s;">
                <div class="flex items-center gap-3 mb-4 md:mb-6">
                    <div class="h-px w-8 md:w-12 bg-rust"></div>
                    <span class="font-mono text-[10px] md:text-xs text-rust uppercase tracking-[0.2em] whitespace-nowrap">Development | Consulting | Training</span>
                </div>
                
                <!-- Title - Bigger on mobile -->
                <h1 class="font-serif text-7xl md:text-8xl lg:text-9xl text-ink leading-[0.85] tracking-tighter mix-blend-multiply">
                    Build your<br>
                    <span class="italic font-light text-neutral-600">Next.</span>
                </h1>
                
                <!-- Desktop only: Description and CTA inline -->
                <p class="hidden md:block mt-8 max-w-md font-sans text-base text-neutral-600 font-light leading-relaxed">
                    We design and build secure, AI-enabled systems for the forward-thinking.
                </p>

                <div class="hidden md:flex mt-10 items-center gap-4 pointer-events-auto">
                    <button id="btn-start-desktop" class="group flex items-center gap-3 bg-sepia text-paper pl-6 pr-5 py-3 rounded-sm hover:bg-ink transition-all duration-500">
                        <span class="font-mono text-xs tracking-widest uppercase">Start</span>
                        <i data-lucide="arrow-right" class="w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                    <div class="h-px w-16 bg-neutral-300"></div>
                    <span class="font-serif italic text-neutral-400 text-sm">v.4.2.0</span>
                </div>
            </div>

            <!-- Mobile only: Bottom section with description and CTA -->
            <div class="absolute bottom-8 left-6 right-6 z-20 md:hidden animate-fade-in opacity-0 pointer-events-auto" style="animation-delay: 0.5s;">
                <p class="max-w-xs font-sans text-sm text-neutral-600 font-light leading-relaxed mb-6">
                    We design and build secure, AI-enabled systems for the forward-thinking.
                </p>

                <div class="flex items-center gap-4">
                    <button id="btn-start-mobile" class="group flex items-center gap-3 bg-sepia text-paper pl-6 pr-5 py-3 rounded-sm hover:bg-ink transition-all duration-500">
                        <span class="font-mono text-xs tracking-widest uppercase">Start</span>
                        <i data-lucide="arrow-right" class="w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                    <div class="h-px w-12 bg-neutral-300"></div>
                    <span class="font-serif italic text-neutral-400 text-sm">v.4.2.0</span>
                </div>
            </div>

            <!-- Footer Coordinates - Perth Global visible on all, Lat/Lon desktop only -->
            <div class="absolute bottom-40 md:bottom-32 left-6 md:left-0 flex flex-col gap-1 z-10">
                <span class="font-mono text-[11px] text-neutral-600 uppercase tracking-widest mb-1">Perth | Global</span>
                <div class="hidden md:flex flex-col opacity-40">
                    <span class="font-mono text-[9px] text-neutral-400">LAT: 31.9514° S</span>
                    <span class="font-mono text-[9px] text-neutral-400">LON: 115.8617° E</span>
                </div>
            </div>
        </div>
    </main>

    <!-- Services Page (initially hidden) -->
    <section id="services-page" class="hidden absolute inset-0 overflow-y-auto z-30 pointer-events-auto bg-transparent">
        <div class="absolute inset-0 pointer-events-none grid-overlay-strong opacity-60 z-0"></div>
        <div class="relative px-6 md:px-12 pt-24 md:pt-32 pb-16 md:pb-20 z-10">
            <div class="flex items-center gap-3 mb-6">
                <div class="h-px w-12 bg-rust"></div>
                <span class="font-mono text-[10px] md:text-xs text-rust uppercase tracking-[0.2em]">Services</span>
            </div>
            <h2 id="service-headline" class="font-serif text-4xl md:text-6xl text-ink leading-tight tracking-tight mb-12">'Form follows function.'</h2>

            <!-- Services / Tabs adapted -->
            <div class="space-y-10">
                <!-- Tabs Navigation -->
                <div class="grid grid-cols-2 md:grid-cols-4 border border-neutral-300">
                    <div onclick="updateService(0)" class="service-tab service-tab-item py-4 px-6 cursor-pointer group active border-r border-neutral-300 last:border-r-0">
                        <div class="service-tab-item-dot"></div>
                        <span class="tab-num text-[10px] font-mono block mb-2">// 01</span>
                        <span class="tab-label" data-original="Development">Development</span>
                    </div>
                    <div onclick="updateService(1)" class="service-tab service-tab-item py-4 px-6 cursor-pointer group border-r border-neutral-300 last:border-r-0">
                        <div class="service-tab-item-dot"></div>
                        <span class="tab-num text-[10px] font-mono block mb-2">// 02</span>
                        <span class="tab-label" data-original="Consulting">Consulting</span>
                    </div>
                    <div onclick="updateService(2)" class="service-tab service-tab-item py-4 px-6 cursor-pointer group border-r border-neutral-300 last:border-r-0">
                        <div class="service-tab-item-dot"></div>
                        <span class="tab-num text-[10px] font-mono block mb-2">// 03</span>
                        <span class="tab-label" data-original="Training">Training</span>
                    </div>
                    <div onclick="updateService(3)" class="service-tab service-tab-item py-4 px-6 cursor-pointer group border-r border-neutral-300 last:border-r-0">
                        <div class="service-tab-item-dot"></div>
                        <span class="tab-num text-[10px] font-mono block mb-2">// 04</span>
                        <span class="tab-label" data-original="Governance">Governance</span>
                    </div>
                </div>

                <!-- Active Content -->
                <div class="grid grid-cols-1 lg:grid-cols-2 border border-neutral-300 bg-transparent shadow-[0_4px_16px_rgba(0,0,0,0.06)]">
                    <!-- Left: Visual -->
                    <div class="relative p-8 flex items-center justify-center overflow-hidden group min-h-[420px]">
                        <div id="service-bg" class="absolute inset-0 bg-cover bg-center opacity-70 transition-all duration-700 bg-[url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=1200&auto=format&fit=crop')] z-0"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-black/20 z-0"></div>
                        
                        <!-- Poster Content -->
                        <div class="relative z-10 border border-white/20 p-6 w-full max-w-md h-[360px] flex flex-col justify-between backdrop-blur-md bg-white/80 shadow-2xl">
                            <div class="relative z-20 flex flex-col justify-between h-full">
                                <div class="flex justify-between items-start">
                                    <h4 id="service-poster-title" class="text-4xl md:text-5xl font-bold leading-none tracking-tighter text-ink transition-opacity duration-300">
                                        M7.4<br>KINETIC<br>LABS
                                    </h4>
                                    <span id="service-poster-num" class="text-neutral-500 font-mono text-lg">+02</span>
                                </div>
                            
                            <!-- Central Content Area (Visualization, Subtext) -->
                            <div id="service-card-central-content" class="relative flex-1 flex flex-col justify-center min-h-0 py-4">
                            
                            <!-- Node Visualization (shown for specific slides) -->
                            <div id="service-node-visualization" class="hidden flex justify-center items-center my-4 transition-opacity duration-300">
                                <!-- Nodes 3D Visualization -->
                                <div class="relative w-28 h-28 z-20" style="transform-style: preserve-3d;">
                                    <svg viewBox="0 0 100 100" class="w-full h-full animate-spin-slow absolute inset-0" style="animation-duration: 20s;">
                                        <!-- Central Node -->
                                        <circle cx="50" cy="50" r="8" fill="#171717" stroke="#8b5cf6" stroke-width="2"></circle>
                                        
                                        <!-- Orbiting Nodes -->
                                        <g class="animate-pulse" style="animation-duration: 3s;">
                                            <circle cx="50" cy="15" r="4" fill="#06b6d4"></circle>
                                            <line x1="50" y1="20" x2="50" y2="42" stroke="#333" stroke-dasharray="2 2"></line>
                                        </g>
                                        <g style="transform-origin: 50px 50px; transform: rotate(120deg);">
                                            <circle cx="50" cy="15" r="4" fill="#a78bfa"></circle>
                                            <line x1="50" y1="20" x2="50" y2="42" stroke="#333" stroke-dasharray="2 2"></line>
                                        </g>
                                        <g style="transform-origin: 50px 50px; transform: rotate(240deg);">
                                            <circle cx="50" cy="15" r="4" fill="#22d3ee"></circle>
                                            <line x1="50" y1="20" x2="50" y2="42" stroke="#333" stroke-dasharray="2 2"></line>
                                        </g>
                                    </svg>
                                    <!-- Counter-rotating ring for depth -->
                                    <div class="absolute inset-0 border border-dashed border-neutral-700/50 rounded-full animate-spin-reverse z-0 scale-125"></div>
                                    <div class="absolute inset-0 flex items-center justify-center font-mono text-[10px] text-violet-300 z-30 bg-neutral-900 rounded-full w-7 h-7 m-auto shadow-lg shadow-violet-500/20">RLS</div>
                                </div>
                            </div>

                            <!-- Clipped Star Decoration (shown for BEAUTIFUL slide) -->
                            <div id="service-star-visualization" class="hidden flex justify-center items-center my-4 transition-opacity duration-300">
                                <div class="clipped-star-container" onclick="toggleStarExpansion(this)">
                                    <img src="https://images.unsplash.com/photo-1681238093193-1b3a8fcdf225?q=80&w=1962&auto=format&fit=crop" alt="Natural design element" class="clipped-star-image" />
                                </div>
                            </div>

                            <!-- Node/Connection Preview (shown for INTELLIGENT slide) -->
                            <div id="service-intelligent-visualization" class="hidden flex justify-center items-center mt-8 mb-2 transition-opacity duration-300">
                                <div class="relative w-full max-w-sm h-48 scale-[0.8] origin-top">
                                    <!-- Connections and nodes -->
                                    <svg class="absolute inset-0 w-full h-full pointer-events-none" viewBox="0 0 400 200">
                                        <!-- Connection lines with dots at ends -->
                                        <g stroke="#f97316" stroke-width="1.5" fill="none">
                                            <!-- User to Orders -->
                                            <path class="connector" d="M120,60 L200,60"></path>
                                            <circle cx="120" cy="60" r="3" fill="#f97316" class="animate-pulse-dot"></circle>
                                            <circle cx="200" cy="60" r="3" fill="#f97316" class="animate-pulse-dot"></circle>
                                            
                                            <!-- Orders to Products -->
                                            <path class="connector" d="M200,60 L280,60"></path>
                                            <circle cx="280" cy="60" r="3" fill="#f97316" class="animate-pulse-dot"></circle>
                                            
                                            <!-- User to Address -->
                                            <path class="connector" d="M120,60 L120,140 L160,140"></path>
                                            <circle cx="160" cy="140" r="3" fill="#f97316" class="animate-pulse-dot"></circle>
                                            
                                            <!-- Orders to Payments -->
                                            <path class="connector" d="M200,60 L200,140 L240,140"></path>
                                            <circle cx="240" cy="140" r="3" fill="#f97316" class="animate-pulse-dot"></circle>
                                            
                                            <!-- Address to Payments -->
                                            <path class="connector" d="M160,140 L240,140"></path>
                                        </g>
                                    </svg>
                                    
                                    <!-- Entity Cards -->
                                    <div class="absolute inset-0 w-full h-full">
                                        <!-- Top row -->
                                        <div class="absolute flex justify-center space-x-10" style="left: 0; right: 0; top: 35px">
                                            <!-- Users card -->
                                            <div class="w-24 h-16 bg-gray-800 rounded-md border border-orange-600/70 shadow-lg overflow-hidden flex flex-col">
                                                <div class="bg-orange-900/30 text-orange-300 text-[8px] px-1.5 py-0.5 font-medium">Users</div>
                                                <div class="px-1.5 py-1">
                                                    <div class="h-0.5 w-full bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-2/3 bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-5/6 bg-gray-700 rounded-full"></div>
                                                </div>
                                            </div>
                                            
                                            <!-- Orders card -->
                                            <div class="w-24 h-16 bg-gray-800 rounded-md border border-orange-600/70 shadow-lg overflow-hidden flex flex-col">
                                                <div class="bg-orange-900/30 text-orange-300 text-[8px] px-1.5 py-0.5 font-medium">Orders</div>
                                                <div class="px-1.5 py-1">
                                                    <div class="h-0.5 w-full bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-3/4 bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-1/2 bg-gray-700 rounded-full"></div>
                                                </div>
                                            </div>
                                            
                                            <!-- Products card -->
                                            <div class="w-24 h-16 bg-gray-800 rounded-md border border-orange-600/70 shadow-lg overflow-hidden flex flex-col">
                                                <div class="bg-orange-900/30 text-orange-300 text-[8px] px-1.5 py-0.5 font-medium">Products</div>
                                                <div class="px-1.5 py-1">
                                                    <div class="h-0.5 w-full bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-4/5 bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-3/5 bg-gray-700 rounded-full"></div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Bottom row -->
                                        <div class="absolute flex justify-center space-x-16" style="left: 0; right: 0; top: 125px">
                                            <!-- Addresses card -->
                                            <div class="w-24 h-16 bg-gray-800 rounded-md border border-orange-600/70 shadow-lg overflow-hidden flex flex-col">
                                                <div class="bg-orange-900/30 text-orange-300 text-[8px] px-1.5 py-0.5 font-medium">Addresses</div>
                                                <div class="px-1.5 py-1">
                                                    <div class="h-0.5 w-full bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-2/3 bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-5/6 bg-gray-700 rounded-full"></div>
                                                </div>
                                            </div>
                                            
                                            <!-- Payments card -->
                                            <div class="w-24 h-16 bg-gray-800 rounded-md border border-orange-600/70 shadow-lg overflow-hidden flex flex-col">
                                                <div class="bg-orange-900/30 text-orange-300 text-[8px] px-1.5 py-0.5 font-medium">Payments</div>
                                                <div class="px-1.5 py-1">
                                                    <div class="h-0.5 w-full bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-1/2 bg-gray-700 mb-1 rounded-full"></div>
                                                    <div class="h-0.5 w-3/4 bg-gray-700 rounded-full"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Strategic Circular Graph (shown for STRATEGIC slide) -->
                            <div id="service-strategic-visualization" class="hidden flex justify-center items-center my-4 transition-opacity duration-300">
                                <div class="flex items-center gap-2">
                                    <div class="relative w-36 h-36 bg-[#030712] rounded-full p-1.5 flex items-center justify-center">
                                        <svg class="circle-chart w-full h-full block" viewBox="0 0 200 200" aria-hidden="true">
                                            <defs>
                                                <filter id="ring-glow" x="-50%" y="-50%" width="200%" height="200%">
                                                    <feGaussianBlur stdDeviation="2" result="coloredBlur"></feGaussianBlur>
                                                    <feMerge>
                                                        <feMergeNode in="coloredBlur"></feMergeNode>
                                                        <feMergeNode in="SourceGraphic"></feMergeNode>
                                                    </feMerge>
                                                </filter>
                                            </defs>
                                            <!-- Background grid circles -->
                                            <circle cx="100" cy="100" r="90" fill="none" stroke="rgba(147,197,253,0.28)" stroke-width="1"></circle>
                                            <circle cx="100" cy="100" r="70" fill="none" stroke="rgba(147,197,253,0.28)" stroke-width="1"></circle>
                                            <circle cx="100" cy="100" r="50" fill="none" stroke="rgba(147,197,253,0.28)" stroke-width="1"></circle>
                                            <circle cx="100" cy="100" r="30" fill="none" stroke="rgba(147,197,253,0.28)" stroke-width="1"></circle>

                                            <!-- Grid lines -->
                                            <line x1="100" y1="10" x2="100" y2="190" stroke="rgba(147,197,253,0.22)" stroke-width="1"></line>
                                            <line x1="10" y1="100" x2="190" y2="100" stroke="rgba(147,197,253,0.22)" stroke-width="1"></line>
                                            <line x1="29.3" y1="29.3" x2="170.7" y2="170.7" stroke="rgba(147,197,253,0.22)" stroke-width="1"></line>
                                            <line x1="29.3" y1="170.7" x2="170.7" y2="29.3" stroke="rgba(147,197,253,0.22)" stroke-width="1"></line>

                                            <!-- Base circle -->
                                            <circle cx="100" cy="100" r="90" fill="none" stroke="rgba(28,25,23,0.18)" stroke-width="6" filter="url(#ring-glow)"></circle>

                                            <!-- Progress circles -->
                                            <circle class="progress-circle" style="--circumference: 565.49; --dash-offset: 140;" cx="100" cy="100" r="90" fill="none" stroke="#60A5FA" stroke-width="6" stroke-linecap="round" filter="url(#ring-glow)"></circle>
                                            <circle class="progress-circle" style="--circumference: 439.82; --dash-offset: 210;" cx="100" cy="100" r="70" fill="none" stroke="#A78BFA" stroke-width="6" stroke-linecap="round" filter="url(#ring-glow)"></circle>
                                            <circle class="progress-circle" style="--circumference: 314.16; --dash-offset: 100;" cx="100" cy="100" r="50" fill="none" stroke="#F472B6" stroke-width="6" stroke-linecap="round" filter="url(#ring-glow)"></circle>

                                            <!-- Center point -->
                                            <circle cx="100" cy="100" r="3" fill="#1C1917"></circle>

                                            <!-- Data points -->
                                            <circle cx="100" cy="10" r="3" fill="#1C1917" opacity="0.7"></circle>
                                            <circle cx="170.7" cy="29.3" r="3" fill="#1C1917" opacity="0.7"></circle>
                                            <circle cx="190" cy="100" r="3" fill="#1C1917" opacity="0.7"></circle>
                                            <circle cx="170.7" cy="170.7" r="3" fill="#1C1917" opacity="0.7"></circle>
                                            <circle cx="100" cy="190" r="3" fill="#1C1917" opacity="0.7"></circle>
                                            <circle cx="29.3" cy="170.7" r="3" fill="#1C1917" opacity="0.7"></circle>
                                            <circle cx="10" cy="100" r="3" fill="#1C1917" opacity="0.7"></circle>
                                            <circle cx="29.3" cy="29.3" r="3" fill="#1C1917" opacity="0.7"></circle>
                                        </svg>
                                    </div>
                                    <div class="bg-[#030712] rounded-lg px-2.5 py-2 border border-white/10 shadow-[0_4px_12px_rgba(0,0,0,0.28)]">
                                        <div class="flex flex-col gap-1.5 text-[10px] text-slate-200">
                                            <div class="flex items-center gap-1.5">
                                                <span class="w-2 h-2 rounded-full bg-[#60A5FA]"></span>
                                                <span>Engagement</span>
                                            </div>
                                            <div class="flex items-center gap-1.5">
                                                <span class="w-2 h-2 rounded-full bg-[#A78BFA]"></span>
                                                <span>Conversion</span>
                                            </div>
                                            <div class="flex items-center gap-1.5">
                                                <span class="w-2 h-2 rounded-full bg-[#F472B6]"></span>
                                                <span>Retention</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Pragmatic Timeline (shown for PRAGMATIC slide) -->
                            <div id="service-pragmatic-visualization" class="hidden flex justify-center items-center mt-6 mb-2 transition-opacity duration-300">
                                <div class="pragmatic-timeline relative w-full max-w-sm h-20">
                                    <div class="absolute left-0 right-0 top-1/2 -mt-1 h-2 rounded-full bg-emerald-200/70"></div>
                                    <div class="pragmatic-line-active absolute left-0 top-1/2 -mt-1 h-2 rounded-full bg-gradient-to-r from-emerald-400 via-emerald-500 to-emerald-400 shadow-[0_0_12px_rgba(16,185,129,0.5)]"></div>
                                    <div class="relative grid grid-cols-4 h-full">
                                         <div class="relative flex items-center justify-center">
                                             <span class="pragmatic-phase absolute left-1/2 top-3 text-ink text-[10px] font-semibold opacity-80 uppercase tracking-[0.2em]">
                                                 <span class="pragmatic-phase-text pragmatic-phase-1">Design</span>
                                             </span>
                                             <span class="pragmatic-dot pragmatic-dot-1 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-emerald-500 ring-4 ring-emerald-200/80 shadow-[0_0_10px_rgba(16,185,129,0.4)] transition-all duration-300"></span>
                                             <div class="absolute left-1/2 top-1/2 -translate-x-1/2 translate-y-7">
                                                 <span class="pragmatic-label text-ink text-[11px] font-semibold">Week 1</span>
                                             </div>
                                         </div>
                                         <div class="relative flex items-center justify-center">
                                             <span class="pragmatic-phase absolute left-1/2 top-3 text-ink text-[10px] font-semibold opacity-80 uppercase tracking-[0.2em]">
                                                 <span class="pragmatic-phase-text pragmatic-phase-2">Dev</span>
                                             </span>
                                             <span class="pragmatic-dot pragmatic-dot-2 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-emerald-500 ring-4 ring-emerald-200/80 shadow-[0_0_10px_rgba(16,185,129,0.4)] transition-all duration-300"></span>
                                             <div class="absolute left-1/2 top-1/2 -translate-x-1/2 translate-y-7">
                                                 <span class="pragmatic-label text-ink text-[11px] font-semibold">Week 2</span>
                                             </div>
                                         </div>
                                         <div class="relative flex items-center justify-center">
                                             <span class="pragmatic-phase absolute left-1/2 top-3 text-ink text-[10px] font-semibold opacity-80 uppercase tracking-[0.2em]">
                                                 <span class="pragmatic-phase-text pragmatic-phase-3">Test</span>
                                             </span>
                                             <span class="pragmatic-dot pragmatic-dot-3 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-emerald-500 ring-4 ring-emerald-200/80 shadow-[0_0_10px_rgba(16,185,129,0.4)] transition-all duration-300"></span>
                                             <div class="absolute left-1/2 top-1/2 -translate-x-1/2 translate-y-7">
                                                 <span class="pragmatic-label text-ink text-[11px] font-semibold">Week 3</span>
                                             </div>
                                         </div>
                                         <div class="relative flex items-center justify-center">
                                             <span class="pragmatic-phase absolute left-1/2 top-3 text-ink text-[10px] font-semibold opacity-80 uppercase tracking-[0.2em]">
                                                 <span class="pragmatic-phase-text pragmatic-phase-4">Launch</span>
                                             </span>
                                             <span class="pragmatic-dot pragmatic-dot-4 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-emerald-500 ring-4 ring-emerald-200/80 shadow-[0_0_10px_rgba(16,185,129,0.4)] transition-all duration-300"></span>
                                             <div class="absolute left-1/2 top-1/2 -translate-x-1/2 translate-y-7">
                                                 <span class="pragmatic-label text-ink text-[11px] font-semibold">Week 4</span>
                                             </div>
                                         </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Adaptive Lottie (shown for ADAPTIVE slide) -->
                            <div id="service-adaptive-visualization" class="hidden absolute left-1/2 top-[42%] -translate-x-1/2 -translate-y-1/2 w-40 h-40 pointer-events-none transition-opacity duration-300"></div>

                            <!-- Foundational Arrow Down Lottie (shown for FOUNDATIONAL slide) -->
                            <div id="service-foundational-visualization" class="hidden absolute left-1/2 top-[42%] -translate-x-1/2 -translate-y-1/2 w-40 h-40 pointer-events-none transition-opacity duration-300"></div>

                            <!-- Applied Lottie (shown for APPLIED slide) -->
                            <div id="service-applied-visualization" class="hidden absolute left-1/2 top-[42%] -translate-x-1/2 -translate-y-1/2 w-36 h-36 pointer-events-none transition-opacity duration-300"></div>

                            <!-- Technical Tree (shown for TECHNICAL slide) -->
                            <div id="service-technical-visualization" class="hidden absolute left-1/2 top-[40%] -translate-x-1/2 -translate-y-1/2 w-full max-w-xs transition-opacity duration-300 pointer-events-auto">
                                <div id="tree-root" class="max-h-[160px] overflow-y-auto px-4 py-2"></div>
                            </div>

                            <!-- Compliant Success Lottie (shown for COMPLIANT slide) -->
                            <div id="service-compliant-visualization" class="hidden absolute left-1/2 top-[42%] -translate-x-1/2 -translate-y-1/2 w-40 h-40 pointer-events-none transition-opacity duration-300"></div>

                            <!-- Protected Lock Lottie (shown for PROTECTED slide) -->
                            <div id="service-protected-visualization" class="hidden absolute left-1/2 top-[42%] -translate-x-1/2 -translate-y-1/2 w-40 h-40 pointer-events-none transition-opacity duration-300" style="filter: grayscale(1) brightness(0.8) contrast(1.4);"></div>

                            <!-- Auditable Scan Lottie (shown for AUDITABLE slide) -->
                            <div id="service-auditable-visualization" class="hidden absolute left-1/2 top-[42%] -translate-x-1/2 -translate-y-1/2 w-56 h-56 pointer-events-none transition-opacity duration-300" style="filter: grayscale(1) brightness(0.8) contrast(1.4);"></div>

                            <!-- Subtext for carousel (shown on left card) -->
                            <div id="service-left-subtext-container" class="hidden mt-2 transition-opacity duration-300">
                                <p id="service-left-subtext" class="text-ink text-sm leading-relaxed opacity-70 relative"></p>
                            </div>
                            </div>

                                <div class="flex justify-between items-end">
                                    <!-- Carousel Controls (Moved to Left Card) -->
                                    <div id="service-carousel-controls" class="flex items-center gap-4">
                                        <button onclick="prevSlide()" class="text-xl text-ink hover:text-sepia transition-colors">←</button>
                                        <span id="slide-indicator" class="font-mono text-xs text-neutral-500 tracking-widest">1/3</span>
                                        <button onclick="nextSlide()" class="text-xl text-ink hover:text-sepia transition-colors">→</button>
                                    </div>

                                    <div class="text-right">
                                         <div class="text-[10px] text-neutral-500 mb-1 uppercase tracking-wide">Category</div>
                                         <div id="service-category" class="text-ink font-bold text-sm uppercase">Cybernetics</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right: Details -->
                    <div class="p-8 md:p-12 flex flex-col justify-center bg-transparent relative">
                        <div id="service-right-content">
                            <h3 id="service-main-title" class="text-3xl md:text-4xl font-semibold text-ink tracking-tight mb-6">
                                <span class="text-neutral-400">V7.</span>DEVELOPMENT
                            </h3>
                            <div class="w-12 h-0.5 bg-neutral-300 mb-6"></div>
                            
                            <div id="service-right-details" class="space-y-6 text-neutral-700">
                                <!-- This content will be swapped between static and dynamic -->
                                <div id="service-right-carousel-content">
                                    <p id="slide-title" class="text-2xl md:text-3xl font-semibold text-ink tracking-tight mb-2 uppercase"></p>
                                    <p id="slide-subtext" class="text-ink text-lg"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Works Page (initially hidden) -->
    <section id="works-page" class="hidden absolute inset-0 overflow-y-auto z-30 pointer-events-auto bg-paper">
        <div class="absolute inset-0 pointer-events-none grid-overlay-strong opacity-60 z-0"></div>
        <div class="relative px-6 md:px-12 pt-24 md:pt-32 pb-16 md:pb-20 z-10">
            <!-- Grid Layout -->
            <div class="grid grid-cols-1 lg:grid-cols-12 min-h-[800px]">
                
                <!-- Sidebar Info -->
                <div class="lg:col-span-3 lg:p-10 flex flex-col z-10 lg:pl-12 border-neutral-200 border-r pt-8 pr-8 pb-8 pl-8 relative justify-between">
                    <div class="">
                        <div class="flex items-center gap-3 mb-8">
                            <span class="w-2 h-2 bg-rust rounded-full animate-pulse shadow-[0_0_10px_rgba(154,52,18,0.3)]"></span>
                            <span id="works-selected-label" class="text-xs font-bold text-rust tracking-widest uppercase font-mono">Selected Works</span>
                        </div>
                        
                        <h3 class="text-4xl lg:text-5xl font-serif text-ink tracking-tight leading-none mb-6">
                            <span id="works-title-digital">Digital</span>
                            <span id="works-title-renaissance" class="text-neutral-400 italic font-light text-3xl lg:text-4xl block mt-1">Renaissance</span>
                        </h3>
                        
                        <div class="text-neutral-600 text-sm leading-relaxed mb-8 font-sans font-light max-w-xs">
                            <span id="works-intro" class="opacity-0 block md:inline">Every venture needs</span>
                            <span id="works-four-things" class="italic font-serif text-ink text-base block md:inline">four things:</span>
                            <div class="mt-3 flex flex-col gap-y-1.5 font-mono text-[10px] uppercase tracking-widest text-rust font-bold overflow-hidden">
                                <span class="works-pillar flex items-center gap-3">
                                    <span class="text-neutral-300 font-normal">01</span>
                                    Offerings
                                </span>
                                <span class="works-pillar flex items-center gap-3">
                                    <span class="text-neutral-300 font-normal">02</span>
                                    Marketing
                                </span>
                                <span class="flex items-center gap-3 works-pillar">
                                    <span class="text-neutral-300 font-normal">03</span>
                                    Sales
                                </span>
                                <span class="flex items-center gap-3 works-pillar">
                                    <span class="text-neutral-300 font-normal">04</span>
                                    Operations
                                </span>
                            </div>
                        </div>

                        <div class="pt-4 mb-8">
                            <a href="#" class="group inline-flex items-center justify-between w-full p-4 border border-neutral-300 hover:border-rust hover:bg-rust/5 transition-all duration-300 bg-transparent max-w-xs">
                                <span class="text-xs font-bold text-ink tracking-widest uppercase group-hover:text-rust transition-colors font-mono">View Archive</span>
                                <i data-lucide="arrow-right" class="w-4 h-4 text-neutral-400 group-hover:text-rust group-hover:translate-x-1 transition-all"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Projects Grid -->
                <div class="lg:col-span-9 grid grid-cols-1 md:grid-cols-2 bg-paper lg:pr-12">
                    
                    <!-- Project 01 -->
                    <div class="works-card group relative border-b border-r border-neutral-200 aspect-[4/3] md:aspect-auto overflow-hidden cursor-pointer">
                        <!-- Image -->
                        <div class="absolute inset-0 bg-cover bg-center transition-transform duration-1000 group-hover:scale-105 ease-out" style="background-image: url('https://hoirqrkdgbmvpwutwuwj.supabase.co/storage/v1/object/public/assets/assets/4734259a-bad7-422f-981e-ce01e79184f2_1600w.jpg');"></div>
                        <div class="absolute inset-0 bg-ink/80 group-hover:bg-ink/20 transition-colors duration-500 mix-blend-multiply"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-ink via-transparent to-transparent opacity-90 group-hover:opacity-60 transition-opacity"></div>
                        
                        <!-- Number -->
                        <span class="absolute top-6 right-6 text-xs font-mono text-white/60 border border-white/20 px-2 py-1 backdrop-blur-sm">01</span>

                        <!-- Content -->
                        <div class="absolute bottom-0 left-0 w-full p-8 md:p-10 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500">
                            <div class="flex flex-col gap-2">
                                <div class="overflow-hidden mb-2">
                                    <span class="inline-block text-[10px] font-bold text-paper tracking-widest uppercase bg-rust px-2 py-1 rounded-sm shadow-lg shadow-rust/20">
                                        FinTech
                                    </span>
                                </div>
                                <h4 class="text-3xl font-semibold text-white tracking-tight mb-1 group-hover:text-white transition-colors">Nova Protocol</h4>
                                <p class="text-neutral-300 text-sm max-w-sm opacity-0 group-hover:opacity-100 transition-opacity duration-500 delay-100 leading-relaxed translate-y-2 group-hover:translate-y-0 transform">
                                    Real-time data visualization infrastructure for decentralized markets.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Project 02 -->
                    <div class="works-card group relative border-b border-neutral-200 aspect-[4/3] md:aspect-auto overflow-hidden cursor-pointer">
                        <div class="absolute inset-0 bg-cover bg-center transition-transform duration-1000 group-hover:scale-105 ease-out" style="background-image: url('https://hoirqrkdgbmvpwutwuwj.supabase.co/storage/v1/object/public/assets/assets/e1b99b27-460a-4be5-a724-b983cad2af0c_1600w.jpg');"></div>
                        <div class="absolute inset-0 bg-ink/80 group-hover:bg-ink/20 transition-colors duration-500 mix-blend-multiply"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-ink via-transparent to-transparent opacity-90 group-hover:opacity-60 transition-opacity"></div>
                        
                        <span class="absolute top-6 right-6 text-xs font-mono text-white/60 border border-white/20 px-2 py-1 backdrop-blur-sm">02</span>

                        <div class="absolute bottom-0 left-0 w-full p-8 md:p-10 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500">
                            <div class="flex flex-col gap-2">
                                <div class="overflow-hidden mb-2">
                                    <span class="inline-block text-[10px] font-bold text-ink tracking-widest uppercase bg-paper px-2 py-1 rounded-sm shadow-lg shadow-black/20">
                                        AI / Neural
                                    </span>
                                </div>
                                <h4 class="text-3xl font-semibold text-white tracking-tight mb-1">Cortex System</h4>
                                <p class="text-neutral-300 text-sm max-w-sm opacity-0 group-hover:opacity-100 transition-opacity duration-500 delay-100 leading-relaxed translate-y-2 group-hover:translate-y-0 transform">
                                    Generative neural network interface design and identity system.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Project 03 -->
                    <div class="works-card group relative border-b md:border-b-0 border-r border-neutral-200 aspect-[4/3] md:aspect-auto overflow-hidden cursor-pointer">
                        <div class="absolute inset-0 bg-cover bg-center transition-transform duration-1000 group-hover:scale-105 ease-out" style="background-image: url('https://hoirqrkdgbmvpwutwuwj.supabase.co/storage/v1/object/public/assets/assets/fba5101b-3f79-421e-85cd-3bfd94dcd647_1600w.jpg');"></div>
                        <div class="absolute inset-0 bg-ink/80 group-hover:bg-ink/20 transition-colors duration-500 mix-blendultiply"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-ink via-transparent to-transparent opacity-90 group-hover:opacity-60 transition-opacity"></div>
                        
                        <span class="absolute top-6 right-6 text-xs font-mono text-white/60 border border-white/20 px-2 py-1 backdrop-blur-sm">03</span>

                        <div class="absolute bottom-0 left-0 w-full p-8 md:p-10 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500">
                            <div class="flex flex-col gap-2">
                                <div class="overflow-hidden mb-2">
                                    <span class="inline-block text-[10px] font-bold text-paper tracking-widest uppercase bg-rust px-2 py-1 rounded-sm shadow-lg shadow-rust/20">
                                        Automotive
                                    </span>
                                </div>
                                <h4 class="text-3xl font-semibold text-white tracking-tight mb-1">Hyperion EV</h4>
                                <p class="text-neutral-300 text-sm max-w-sm opacity-0 group-hover:opacity-100 transition-opacity duration-500 delay-100 leading-relaxed translate-y-2 group-hover:translate-y-0 transform">
                                    In-cabin HMI design and global launch campaign visuals.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Project 04 (More) -->
                    <div class="works-card group relative border-neutral-200 aspect-[4/3] md:aspect-auto overflow-hidden cursor-pointer bg-[#F5F5F0] hover:bg-neutral-200 transition-colors duration-500">
                        <!-- Grid Pattern -->
                        <div class="absolute inset-0 opacity-5" style="background-image: linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px); background-size: 20px 20px;"></div>
                        
                        <span class="absolute top-6 right-6 text-xs font-mono text-neutral-400 border border-neutral-300 px-2 py-1">04</span>

                        <div class="absolute inset-0 flex items-center justify-center p-12">
                             <div class="text-center">
                                <div class="w-16 h-16 rounded-full border border-neutral-300 flex items-center justify-center mx-auto mb-6 text-neutral-400 group-hover:text-ink group-hover:border-rust group-hover:bg-rust group-hover:text-paper transition-all duration-300 scale-100 group-hover:scale-110">
                                    <i data-lucide="plus" class="w-6 h-6"></i>
                                </div>
                                <h4 class="text-xl font-semibold text-ink tracking-tight mb-2 group-hover:text-rust transition-colors">Project Vault</h4>
                                <p class="text-xs text-neutral-500 uppercase tracking-widest font-mono">Explore All 84+ Cases</p>
                             </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>

    <!-- About Us Page (initially hidden) -->
    <section id="about-page" class="hidden absolute inset-0 overflow-y-auto z-30 pointer-events-auto bg-paper">
        <div class="absolute inset-0 pointer-events-none grid-overlay-strong opacity-60 z-0"></div>
        <div class="relative px-6 md:px-12 pt-24 md:pt-32 pb-16 md:pb-20 z-10">
            <div class="flex items-center gap-3 mb-6">
                <div class="h-px w-12 bg-rust"></div>
                <span class="font-mono text-[10px] md:text-xs text-rust uppercase tracking-[0.2em]">About Us</span>
            </div>
            <h2 class="font-serif text-4xl md:text-6xl text-ink leading-tight tracking-tight mb-12">Zenias | Building the Next Generation of Automated Systems.</h2>
            <div class="max-w-2xl font-sans text-lg text-neutral-600 space-y-6">
                <p>Founded on the principles of Renaissance ingenuity and modern algorithmic precision, Zenias is a design and development studio dedicated to creating systems that are as beautiful as they are functional.</p>
                <p>We believe that the future of automation isn't just about speed, but about harmony between human intuition and machine intelligence.</p>
            </div>
        </div>
    </section>

    <!-- Shaders -->
    <script type="x-shader/x-vertex" id="vertexShader">
        uniform float uTime;
        uniform float uDistortion; 
        uniform float uSize;       
        uniform vec2 uMouse;

        varying float vAlpha;
        varying vec3 vPos;
        varying float vNoise;

        // Simplex Noise (Standard implementation)
        vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
        vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
        vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
        vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
        
        float snoise(vec3 v) {
            const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
            const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
            vec3 i  = floor(v + dot(v, C.yyy) );
            vec3 x0 = v - i + dot(i, C.xxx) ;
            vec3 g = step(x0.yzx, x0.xyz);
            vec3 l = 1.0 - g;
            vec3 i1 = min( g.xyz, l.zxy );
            vec3 i2 = max( g.xyz, l.zxy );
            vec3 x1 = x0 - i1 + 1.0 * C.xxx;
            vec3 x2 = x0 - i2 + 2.0 * C.xxx;
            vec3 x3 = x0 - 1.0 + 3.0 * C.xxx;
            i = mod289(i);
            vec4 p = permute( permute( permute(
                        i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
                    + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
                    + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
            float n_ = 1.0/7.0;
            vec3  ns = n_ * D.wyz - D.xzx;
            vec4 j = p - 49.0 * floor(p * ns.z *ns.z);
            vec4 x_ = floor(j * ns.z);
            vec4 y_ = floor(j - 7.0 * x_ );
            vec4 x = x_ *ns.x + ns.yyyy;
            vec4 y = y_ *ns.x + ns.yyyy;
            vec4 h = 1.0 - abs(x) - abs(y);
            vec4 b0 = vec4( x.xy, y.xy );
            vec4 b1 = vec4( x.zw, y.zw );
            vec4 s0 = floor(b0)*2.0 + 1.0;
            vec4 s1 = floor(b1)*2.0 + 1.0;
            vec4 sh = -step(h, vec4(0.0));
            vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
            vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
            vec3 p0 = vec3(a0.xy,h.x);
            vec3 p1 = vec3(a0.zw,h.y);
            vec3 p2 = vec3(a1.xy,h.z);
            vec3 p3 = vec3(a1.zw,h.w);
            vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
            p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;
            vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
            m = m * m;
            return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );
        }

        void main() {
            vec3 pos = position;
            
            // Smoother, more organic noise (Liquid/Ink feel)
            float noiseFreq = 0.5;
            float noiseAmp = uDistortion;
            float noise = snoise(vec3(pos.x * noiseFreq + uTime * 0.1, pos.y * noiseFreq, pos.z * noiseFreq));
            
            vNoise = noise;
            
            // Deform the sphere along normal based on noise
            vec3 newPos = pos + (normalize(pos) * noise * noiseAmp);

            // Interaction
            float dist = distance(uMouse * 10.0, newPos.xy);
            float interaction = smoothstep(5.0, 0.0, dist);
            newPos += normalize(pos) * interaction * 0.5;

            vec4 mvPosition = modelViewMatrix * vec4(newPos, 1.0);
            gl_Position = projectionMatrix * mvPosition;

            // Size variation based on depth and noise
            gl_PointSize = uSize * (24.0 / -mvPosition.z) * (1.0 + noise * 0.5);
            
            vAlpha = 1.0;
            vPos = newPos;
        }
    </script>

    <script type="x-shader/x-fragment" id="fragmentShader">
        uniform vec3 uColor;
        uniform float uOpacity;
        
        varying float vNoise;
        varying vec3 vPos;

        void main() {
            // Soft circle particle
            vec2 center = gl_PointCoord - vec2(0.5);
            float dist = length(center);
            if (dist > 0.5) discard;
            
            // Soft edges for "ink blot" effect
            float alpha = smoothstep(0.5, 0.2, dist) * uOpacity;
            
            // Color variation based on noise (creates depth)
            vec3 darkColor = uColor * 0.5;
            vec3 lightColor = uColor * 1.8; // Highlights
            
            vec3 finalColor = mix(darkColor, lightColor, vNoise * 0.5 + 0.5);
            
            gl_FragColor = vec4(finalColor, alpha);
        }
    </script>

    <script>
        lucide.createIcons();

        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        // Fog to blend into paper background
        scene.fog = new THREE.FogExp2(0xCECECE, 0.035);

        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 0, 18);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        // Group to hold the "Systems"
        const systemsGroup = new THREE.Group();
        systemsGroup.position.x = 4.0; 
        scene.add(systemsGroup);

        // --- MAIN PARTICLE MESH (The "Brain/Cloud") ---
        // Dense geometry for ink effect
        const geometry = new THREE.IcosahedronGeometry(4.5, 30);
        
        const uniforms = {
            uTime: { value: 0 },
            uDistortion: { value: 0.6 },
            uSize: { value: 2.5 },
            uColor: { value: new THREE.Color('#4A1D0A') }, // Dark Red
            uOpacity: { value: 0.8 },
            uMouse: { value: new THREE.Vector2(0, 0) }
        };

        const material = new THREE.ShaderMaterial({
            vertexShader: document.getElementById('vertexShader').textContent,
            fragmentShader: document.getElementById('fragmentShader').textContent,
            uniforms: uniforms,
            transparent: true,
            depthWrite: false,
            // Additive blending makes it look too digital/glowing. 
            // Normal blending is better for ink/physical matter.
            blending: THREE.NormalBlending
        });

        const particles = new THREE.Points(geometry, material);
        systemsGroup.add(particles);

        // --- RENAISSANCE LINES (Astrolabe effect) ---
        const lineGroup = new THREE.Group();
        systemsGroup.add(lineGroup);

        function createThinOrbit(radius, rotation) {
            const curve = new THREE.EllipseCurve(
                0, 0,            // ax, aY
                radius, radius,  // xRadius, yRadius
                0, 2 * Math.PI,  // aStartAngle, aEndAngle
                false,           // aClockwise
                0                // aRotation
            );
            const points = curve.getPoints(128);
            const geo = new THREE.BufferGeometry().setFromPoints(points);
            const mat = new THREE.LineBasicMaterial({ 
                color: 0x78350F, // Sepia
                transparent: true, 
                opacity: 0.15 
            });
            const orbit = new THREE.Line(geo, mat);
            orbit.rotation.x = rotation.x;
            orbit.rotation.y = rotation.y;
            lineGroup.add(orbit);
            return orbit;
        }

        const orbits = [
            createThinOrbit(5.5, {x: Math.PI/2, y: 0}),
            createThinOrbit(5.2, {x: Math.PI/3, y: Math.PI/6}),
            createThinOrbit(6.0, {x: Math.PI/1.8, y: Math.PI/4})
        ];

        // --- INTERACTION & ANIMATION ---
        let time = 0;
        let speed = 0.1;
        let mouseX = 0, mouseY = 0;
        const transitionRotationY = { value: 0 };

        // New Interaction State
        let isDragging = false;
        let previousMouse = { x: 0, y: 0 };
        let rotationVelocity = { x: 0, y: 0 };
        let cumulativeRotation = { x: 0, y: 0 };

        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
            uniforms.uMouse.value.x += (mouseX - uniforms.uMouse.value.x) * 0.05;
            uniforms.uMouse.value.y += (mouseY - uniforms.uMouse.value.y) * 0.05;
        });

        // Drag Events (Mouse)
        document.addEventListener('mousedown', (e) => {
            isDragging = true;
            previousMouse = { x: e.clientX, y: e.clientY };
            rotationVelocity = { x: 0, y: 0 }; // Reset velocity on grab
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - previousMouse.x;
                const deltaY = e.clientY - previousMouse.y;
                
                // Update velocity based on drag speed
                rotationVelocity.x = deltaY * 0.005; // Drag Y controls X rotation
                rotationVelocity.y = deltaX * 0.005; // Drag X controls Y rotation
                
                cumulativeRotation.x += rotationVelocity.x;
                cumulativeRotation.y += rotationVelocity.y;
                
                previousMouse = { x: e.clientX, y: e.clientY };
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
        });

        // Drag Events (Touch)
        document.addEventListener('touchstart', (e) => {
            isDragging = true;
            previousMouse = { x: e.touches[0].clientX, y: e.touches[0].clientY };
            rotationVelocity = { x: 0, y: 0 };
        }, { passive: false });

        document.addEventListener('touchmove', (e) => {
            if (isDragging) {
                const deltaX = e.touches[0].clientX - previousMouse.x;
                const deltaY = e.touches[0].clientY - previousMouse.y;
                
                rotationVelocity.x = deltaY * 0.005;
                rotationVelocity.y = deltaX * 0.005;
                
                cumulativeRotation.x += rotationVelocity.x;
                cumulativeRotation.y += rotationVelocity.y;
                
                previousMouse = { x: e.touches[0].clientX, y: e.touches[0].clientY };
            }
        }, { passive: false });

        document.addEventListener('touchend', () => {
            isDragging = false;
        });

        // Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            adjustLayout();
        });

        function adjustLayout() {
            // Mobile: Move group down so it doesn't block top text, slightly smaller
            if(window.innerWidth < 768) {
                systemsGroup.position.set(0, -1.0, -5);
                systemsGroup.scale.set(0.75, 0.75, 0.75);
            } else {
                systemsGroup.position.set(4.5, 0, 0);
                systemsGroup.scale.set(1, 1, 1);
            }
        }
        adjustLayout();

        function animate() {
            requestAnimationFrame(animate);
            
            // Base time progression
            time += 0.01 + (speed * 0.05);

            if (!isDragging) {
                // Apply momentum damping
                rotationVelocity.x *= 0.95;
                rotationVelocity.y *= 0.95;
                
                // Return to base rotation speed gradually
                const baseSpeed = 0.0008; // Approx original speed
                
                // Ease Y rotation to base speed
                rotationVelocity.y += (baseSpeed - rotationVelocity.y) * 0.02;
                
                // Dampen X rotation to 0
                if (Math.abs(rotationVelocity.x) < 0.0001) rotationVelocity.x = 0;
                
                cumulativeRotation.x += rotationVelocity.x;
                cumulativeRotation.y += rotationVelocity.y;
            }

            // Apply calculated rotation
            // We ADD existing transitionRotationY logic (scrolling)
            systemsGroup.rotation.x = cumulativeRotation.x;
            systemsGroup.rotation.y = cumulativeRotation.y + transitionRotationY.value;
            
            // Subtle Z wobble
            systemsGroup.rotation.z = Math.sin(time * 0.1) * 0.05;

            // Counter-rotate orbits
            lineGroup.rotation.x = Math.sin(time * 0.05) * 0.2;
            orbits.forEach((orbit, i) => {
                orbit.rotation.z += 0.002 * (i + 1);
            });

            // Smooth camera sway based on mouse
            camera.position.x += (mouseX * 0.5 - camera.position.x) * 0.05;
            camera.position.y += (mouseY * 0.5 - camera.position.y) * 0.05;
            camera.lookAt(0,0,0);

            uniforms.uTime.value = time;
            renderer.render(scene, camera);
        }
        animate();

        // Mobile Menu Logic
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        let isMenuOpen = false;

        // Load Lottie Animation
        // Note: Using the JSON data provided by user inline to avoid CORS/file path issues if running locally without a server
        const menuAnimationData = {"v":"5.4.4","fr":60,"ip":0,"op":140,"w":100,"h":100,"nm":"Menu","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Buttom","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":40,"s":[0],"e":[-45]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":60,"s":[-45],"e":[-45]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":85,"s":[-45],"e":[0]},{"t":105}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":10,"s":[51,70,0],"e":[51,78,0],"to":[0,1.333,0],"ti":[0,3.333,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":23,"s":[51,78,0],"e":[51,50,0],"to":[0,-3.333,0],"ti":[0,4.667,0]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":36,"s":[51,50,0],"e":[51,50,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":110,"s":[51,50,0],"e":[51,78,0],"to":[0,4.667,0],"ti":[0,-3.333,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":123,"s":[51,78,0],"e":[51,70,0],"to":[0,3.333,0],"ti":[0,1.333,0]},{"t":136}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[31,4],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":2,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000000298,0.20000000298,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[200,200],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Buttom","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":331,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Center","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":40,"s":[0],"e":[45]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":60,"s":[45],"e":[45]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":85,"s":[45],"e":[0]},{"t":105}],"ix":10},"p":{"a":0,"k":[51,50,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[31,4],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":2,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000000298,0.20000000298,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[200,200],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Center","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":331,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Upper","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":40,"s":[0],"e":[-45]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":60,"s":[-45],"e":[-45]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":85,"s":[-45],"e":[0]},{"t":105}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":10,"s":[51,30,0],"e":[51,22,0],"to":[0,-1.333,0],"ti":[0,-3.333,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":23,"s":[51,22,0],"e":[51,50,0],"to":[0,3.333,0],"ti":[0,-4.667,0]},{"i":{"x":0.831,"y":0.831},"o":{"x":0.165,"y":0.165},"t":36,"s":[51,50,0],"e":[51,50,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":110,"s":[51,50,0],"e":[51,22,0],"to":[0,-4.667,0],"ti":[0,3.333,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":123,"s":[51,22,0],"e":[51,30,0],"to":[0,-3.333,0],"ti":[0,-1.333,0]},{"t":136}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[31,4],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":2,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000000298,0.20000000298,0.20000000298,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[200,200],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Upper","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":331,"st":0,"bm":0}],"markers":[]};

        const menuAnim = lottie.loadAnimation({
            container: mobileMenuBtn,
            renderer: 'svg',
            loop: false,
            autoplay: false,
            animationData: menuAnimationData
        });

        // Speed up animation slightly
        menuAnim.setSpeed(1.5);

        // Adaptive Lottie Animation
        const adaptiveLottieData = {"v":"4.8.0","meta":{"g":"LottieFiles AE 1.0.0","a":"","k":"","d":"","tc":"#FFFFFF"},"fr":29.9700012207031,"ip":0,"op":31.0000012626559,"w":500,"h":500,"nm":"Loading ","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Rectangle_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":135,"ix":10},"p":{"a":0,"k":[250,156.235,0],"ix":2},"a":{"a":0,"k":[-125,-107,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[57,-57],[57,57],[-57,57],[-57,-57]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[{"i":[[-31.437,0],[0,-31.437],[31.437,0],[0,31.437]],"o":[[31.437,0],[0,31.437],[-31.437,0],[0,-31.437]],"v":[[0.718,-187.388],[57.64,-130.466],[0.718,-73.544],[-56.204,-130.466]],"c":true}]},{"t":30.0000012219251,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[188.6,-188.5],[188.6,-74.5],[74.6,-74.5],[74.6,-188.5]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0.2353,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.2627,0.102,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-125,-107],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90.0000036657751,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Rectangle_2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":585,"ix":10},"p":{"a":0,"k":[343,250,0],"ix":2},"a":{"a":0,"k":[-125,-107,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[57,-57],[57,57],[-57,57],[-57,-57]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[{"i":[[-31.437,0],[0,-31.437],[31.437,0],[0,31.437]],"o":[[31.437,0],[0,31.437],[-31.437,0],[0,-31.437]],"v":[[0.718,-187.388],[57.64,-130.466],[0.718,-73.544],[-56.204,-130.466]],"c":true}]},{"t":30.0000012219251,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[188.6,-188.5],[188.6,-74.5],[74.6,-74.5],[74.6,-188.5]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0.2353,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.5437,0.26,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-125,-107],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90.0000036657751,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Rectangle_3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":315,"ix":10},"p":{"a":0,"k":[250,342.86,0],"ix":2},"a":{"a":0,"k":[-125,-107,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[57,-57],[57,57],[-57,57],[-57,-57]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[{"i":[[-31.437,0],[0,-31.437],[31.437,0],[0,31.437]],"o":[[31.437,0],[0,31.437],[-31.437,0],[0,-31.437]],"v":[[0.718,-187.388],[57.64,-130.466],[0.718,-73.544],[-56.204,-130.466]],"c":true}]},{"t":30.0000012219251,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[188.6,-188.5],[188.6,-74.5],[74.6,-74.5],[74.6,-188.5]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0.2353,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.2627,0.102,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-125,-107],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90.0000036657751,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Rectangle_4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":45,"ix":10},"p":{"a":0,"k":[157.156,250,0],"ix":2},"a":{"a":0,"k":[-125,-107,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[57,-57],[57,57],[-57,57],[-57,-57]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":15,"s":[{"i":[[-31.437,0],[0,-31.437],[31.437,0],[0,31.437]],"o":[[31.437,0],[0,31.437],[-31.437,0],[0,-31.437]],"v":[[0.718,-187.388],[57.64,-130.466],[0.718,-73.544],[-56.204,-130.466]],"c":true}]},{"t":30.0000012219251,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[188.6,-188.5],[188.6,-74.5],[74.6,-74.5],[74.6,-188.5]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0.2353,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.5437,0.26,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[-125,-107],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90.0000036657751,"st":0,"bm":0}],"markers":[]};
        const adaptiveLottieContainer = document.getElementById('service-adaptive-visualization');
        let adaptiveLottieAnim = null;
        if (adaptiveLottieContainer) {
            adaptiveLottieAnim = lottie.loadAnimation({
                container: adaptiveLottieContainer,
                renderer: 'svg',
                loop: true,
                autoplay: false,
                animationData: adaptiveLottieData
            });
        }

        // Foundational Arrow Down Lottie Animation
        const foundationalLottieData = {"v":"4.8.0","meta":{"g":"LottieFiles AE 1.0.0","a":"","k":"","d":"","tc":"#FFFFFF"},"fr":30,"ip":0,"op":117,"w":1920,"h":1920,"nm":"Download","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Shape Layer 5","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0],"y":[1]},"o":{"x":[0],"y":[0]},"t":92,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":112,"s":[100]},{"i":{"x":[1],"y":[1]},"o":{"x":[1],"y":[0]},"t":117,"s":[100]},{"t":127,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0,"y":1},"o":{"x":0,"y":0},"t":92,"s":[960,344,0],"to":[0,153.5,0],"ti":[0,-153.5,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":112,"s":[960,1265,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":1,"y":1},"o":{"x":1,"y":0},"t":117,"s":[960,1265,0],"to":[0,93.333,0],"ti":[0,-93.333,0]},{"t":127,"s":[960,1825,0]}],"ix":2},"a":{"a":0,"k":[0,305,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0,0,0.667],"y":[1,1,1]},"o":{"x":[0,0,0.333],"y":[0,0,0]},"t":92,"s":[60,60,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":112,"s":[100,100,100]},{"i":{"x":[1,1,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":117,"s":[100,100,100]},{"t":127,"s":[60,60,100]}],"ix":6}},"ao":0,"shapes":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[430,-105],[430,105],[0.5,305],[-430,105],[-430,-105],[0.5,95]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.149019607843,0.149019607843,0.149019607843,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":92,"op":242,"st":92,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Shape Layer 4","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0],"y":[1]},"o":{"x":[0],"y":[0]},"t":69,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":89,"s":[100]},{"i":{"x":[1],"y":[1]},"o":{"x":[1],"y":[0]},"t":94,"s":[100]},{"t":104,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0,"y":1},"o":{"x":0,"y":0},"t":69,"s":[960,344,0],"to":[0,153.5,0],"ti":[0,-153.5,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":89,"s":[960,1265,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":1,"y":1},"o":{"x":1,"y":0},"t":94,"s":[960,1265,0],"to":[0,93.333,0],"ti":[0,-93.333,0]},{"t":104,"s":[960,1825,0]}],"ix":2},"a":{"a":0,"k":[0,305,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0,0,0.667],"y":[1,1,1]},"o":{"x":[0,0,0.333],"y":[0,0,0]},"t":69,"s":[60,60,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":89,"s":[100,100,100]},{"i":{"x":[1,1,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":94,"s":[100,100,100]},{"t":104,"s":[60,60,100]}],"ix":6}},"ao":0,"shapes":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[430,-105],[430,105],[0.5,305],[-430,105],[-430,-105],[0.5,95]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.149019607843,0.149019607843,0.149019607843,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":69,"op":219,"st":69,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Shape Layer 3","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0],"y":[1]},"o":{"x":[0],"y":[0]},"t":46,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":66,"s":[100]},{"i":{"x":[1],"y":[1]},"o":{"x":[1],"y":[0]},"t":71,"s":[100]},{"t":81,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0,"y":1},"o":{"x":0,"y":0},"t":46,"s":[960,344,0],"to":[0,153.5,0],"ti":[0,-153.5,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":66,"s":[960,1265,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":1,"y":1},"o":{"x":1,"y":0},"t":71,"s":[960,1265,0],"to":[0,93.333,0],"ti":[0,-93.333,0]},{"t":81,"s":[960,1825,0]}],"ix":2},"a":{"a":0,"k":[0,305,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0,0,0.667],"y":[1,1,1]},"o":{"x":[0,0,0.333],"y":[0,0,0]},"t":46,"s":[60,60,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":66,"s":[100,100,100]},{"i":{"x":[1,1,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":71,"s":[100,100,100]},{"t":81,"s":[60,60,100]}],"ix":6}},"ao":0,"shapes":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[430,-105],[430,105],[0.5,305],[-430,105],[-430,-105],[0.5,95]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.149019607843,0.149019607843,0.149019607843,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":46,"op":196,"st":46,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Shape Layer 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0],"y":[1]},"o":{"x":[0],"y":[0]},"t":23,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":43,"s":[100]},{"i":{"x":[1],"y":[1]},"o":{"x":[1],"y":[0]},"t":48,"s":[100]},{"t":58,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0,"y":1},"o":{"x":0,"y":0},"t":23,"s":[960,344,0],"to":[0,153.5,0],"ti":[0,-153.5,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":43,"s":[960,1265,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":1,"y":1},"o":{"x":1,"y":0},"t":48,"s":[960,1265,0],"to":[0,93.333,0],"ti":[0,-93.333,0]},{"t":58,"s":[960,1825,0]}],"ix":2},"a":{"a":0,"k":[0,305,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0,0,0.667],"y":[1,1,1]},"o":{"x":[0,0,0.333],"y":[0,0,0]},"t":23,"s":[60,60,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":43,"s":[100,100,100]},{"i":{"x":[1,1,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":48,"s":[100,100,100]},{"t":58,"s":[60,60,100]}],"ix":6}},"ao":0,"shapes":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[430,-105],[430,105],[0.5,305],[-430,105],[-430,-105],[0.5,95]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.149019607843,0.149019607843,0.149019607843,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":23,"op":173,"st":23,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0],"y":[1]},"o":{"x":[0],"y":[0]},"t":0,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":20,"s":[100]},{"i":{"x":[1],"y":[1]},"o":{"x":[1],"y":[0]},"t":25,"s":[100]},{"t":35,"s":[0]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0,"y":1},"o":{"x":0,"y":0},"t":0,"s":[960,344,0],"to":[0,153.5,0],"ti":[0,-153.5,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":20,"s":[960,1265,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":1,"y":1},"o":{"x":1,"y":0},"t":25,"s":[960,1265,0],"to":[0,93.333,0],"ti":[0,-93.333,0]},{"t":35,"s":[960,1825,0]}],"ix":2},"a":{"a":0,"k":[0,305,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0,0,0.667],"y":[1,1,1]},"o":{"x":[0,0,0.333],"y":[0,0,0]},"t":0,"s":[60,60,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":20,"s":[100,100,100]},{"i":{"x":[1,1,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":25,"s":[100,100,100]},{"t":35,"s":[60,60,100]}],"ix":6}},"ao":0,"shapes":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[430,-105],[430,105],[0.5,305],[-430,105],[-430,-105],[0.5,95]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.149019607843,0.149019607843,0.149019607843,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false}],"ip":0,"op":150,"st":0,"bm":0}],"markers":[]};
        const foundationalLottieContainer = document.getElementById('service-foundational-visualization');
        let foundationalLottieAnim = null;
        if (foundationalLottieContainer) {
            foundationalLottieAnim = lottie.loadAnimation({
                container: foundationalLottieContainer,
                renderer: 'svg',
                loop: true,
                autoplay: false,
                animationData: foundationalLottieData
            });
        }

        // Applied Lottie Animation
        const appliedLottieContainer = document.getElementById('service-applied-visualization');
        let appliedLottieAnim = null;
        if (appliedLottieContainer) {
            appliedLottieAnim = lottie.loadAnimation({
                container: appliedLottieContainer,
                renderer: 'svg',
                loop: true,
                autoplay: false,
                path: 'LZD TEch.json'
            });
        }

        // Compliant Lottie Animation
        const compliantLottieContainer = document.getElementById('service-compliant-visualization');
        let compliantLottieAnim = null;
        if (compliantLottieContainer) {
            compliantLottieAnim = lottie.loadAnimation({
                container: compliantLottieContainer,
                renderer: 'svg',
                loop: true,
                autoplay: false,
                path: 'Success (2).json'
            });
        }

        // Protected Lottie Animation
        const protectedLottieContainer = document.getElementById('service-protected-visualization');
        let protectedLottieAnim = null;
        if (protectedLottieContainer) {
            protectedLottieAnim = lottie.loadAnimation({
                container: protectedLottieContainer,
                renderer: 'svg',
                loop: true,
                autoplay: false,
                path: 'Authentication Lock Login.json'
            });
        }

        // Auditable Lottie Animation
        const auditableLottieContainer = document.getElementById('service-auditable-visualization');
        let auditableLottieAnim = null;
        if (auditableLottieContainer) {
            auditableLottieAnim = lottie.loadAnimation({
                container: auditableLottieContainer,
                renderer: 'svg',
                loop: true,
                autoplay: false,
                path: 'Document OCR Scan.json'
            });
        }

        function toggleMenu() {
            isMenuOpen = !isMenuOpen;
            if (isMenuOpen) {
                // Open Menu
                mobileMenu.classList.remove('invisible', 'opacity-0', 'translate-y-[-10px]');
                mobileMenu.classList.add('opacity-100', 'translate-y-0');
                
                // Play to frame 60 for a perfect X
                menuAnim.playSegments([0, 60], true); 
                
            } else {
                // Close Menu
                mobileMenu.classList.add('opacity-0', 'translate-y-[-10px]');
                mobileMenu.classList.remove('opacity-100', 'translate-y-0');
                setTimeout(() => mobileMenu.classList.add('invisible'), 300);
                
                // Play from frame 85 to return to hamburger
                menuAnim.playSegments([85, 140], true);
            }
        }

        mobileMenuBtn.addEventListener('click', toggleMenu);

        // --- About Page Data & Tabs ---
        const serviceData = [
            {
                id: '01',
                name: 'Development',
                headline: "'Form follows function.'",
                posterTitle: 'M7.9<br>DIGITAL<br>LABS',
                posterNum: '+01',
                category: 'Engineering',
                suffix: 'DEVELOPMENT',
                image: 'https://images.unsplash.com/photo-1724525647065-f948fc102e68?w=2160&q=80',
                staticDescription: 'We build bespoke full-stack applications completely tailored to your needs. We bake in automation from inception, guaranteeing time savings and margin maximisation.',
                slides: [
                    { title: 'SECURE', subtext: 'Safeguard your data with sovereign infrastructure and world-class security', category: 'PRIVACY & SECURITY' },
                    { title: 'BEAUTIFUL', subtext: 'Elegent interfaces built around your personal workflow.', category: 'DESIGN & EXPERIENCE' },
                    { title: 'INTELLIGENT', subtext: 'AI-native systems that learn, streamline, and automate your processes.', category: 'AUTOMATION & AI' }
                ]
            },
            {
                id: '02',
                name: 'Consulting',
                headline: "'Measure twice, cut once.'",
                posterTitle: 'M7.1<br>STRATEGY<br>LABS',
                posterNum: '+02',
                category: 'Consulting',
                suffix: 'CONSULTING',
                image: 'https://images.unsplash.com/photo-1640906152676-dace6710d24b?w=2160&q=80',
                staticDescription: 'We guide organisations through AI transformation with strategic competitor analysis, readiness assessments, and goal-setting frameworks - ensuring you adopt intelligently, not recklessly.',
                slides: [
                    { title: 'STRATEGIC', subtext: 'Market positioning and competitive analysis for the AI era.', category: 'STRATEGY & POSITIONING' },
                    { title: 'PRAGMATIC', subtext: 'AI readiness assessments and phased implementation roadmaps.', category: 'IMPLEMENTATION & PLANNING' },
                    { title: 'ADAPTIVE', subtext: 'Ongoing advisory as your capabilities and the landscape evolve.', category: 'CONTINUOUS ADVISORY' }
                ]
            },
            {
                id: '03',
                name: 'Training',
                headline: "'Teach a man to fish.'",
                posterTitle: 'M7.8<br>VISUAL<br>LABS',
                posterNum: '+03',
                category: 'Simulation',
                suffix: 'TRAINING',
                image: 'https://images.unsplash.com/photo-1629946832022-c327f74956e0?w=2160&q=80',
                staticDescription: 'We teach teams to fish in digital waters. Whether you need to master ChatGPT for daily workflows or build production-grade marketing agents from scratch, our training installs lasting competence - not over-hyped tricks.',
                slides: [
                    { title: 'FOUNDATIONAL', subtext: 'AI fundamentals, enterprise tool mastery (ChatGPT, Copilot, Gemini).', category: 'AI ESSENTIALS' },
                    { title: 'APPLIED', subtext: 'Workflow automation and no-code/low-code system building.', category: 'PRACTICAL AUTOMATION' },
                    { title: 'TECHNICAL', subtext: 'Full-stack training with templates, frameworks, and on-going support.', category: 'FULL-STACK DEVELOPMENT' }
                ]
            },
            {
                id: '04',
                name: 'Governance',
                headline: "'Innovation from foundation.'",
                posterTitle: 'M7.4<br>KINETIC<br>LABS',
                posterNum: '+04',
                category: 'Cybernetics',
                suffix: 'GOVERNANCE',
                image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=2670&auto=format&fit=crop',
                staticDescription: 'We architect the policy and operational frameworks that make AI adoption safe - covering compliance, intellectual property, data sovereignty and auditability.',
                slides: [
                    { title: 'COMPLIANT', subtext: 'Internal AI policies, data privacy frameworks, and risk mitigation.', category: 'POLICY & COMPLIANCE' },
                    { title: 'PROTECTED', subtext: 'IP strategy for AI-generated work and proprietary model protection.', category: 'INTELLECTUAL PROPERTY' },
                    { title: 'AUDITABLE', subtext: 'Smart contract design and transparent decision-making systems.', category: 'TRANSPARENCY & TRUST' }
                ]
            }
        ];

        // Tree Data and Logic
        const technicalTreeData = {
            id: 'company',
            name: 'Company',
            children: [
                {
                    id: 'engineering',
                    name: 'App Development',
                    children: [
                        {
                            id: 'frontend',
                            name: 'Frontend',
                            children: [
                                { id: 'design-system', name: 'Design System', children: [{ id: 'components', name: 'Components' }, { id: 'tokens', name: 'Tokens' }, { id: 'guidelines', name: 'Guidelines' }] },
                                { id: 'web-platform', name: 'Web Platform' }
                            ]
                        },
                        { id: 'backend', name: 'Backend', children: [{ id: 'apis', name: 'APIs' }, { id: 'infrastructure', name: 'Infrastructure' }] },
                        { id: 'platform-team', name: 'Platform Team' }
                    ]
                },
                {
                    id: 'marketing',
                    name: 'Marketing',
                    children: [
                        { id: 'content', name: 'Content' },
                        { id: 'seo', name: 'SEO' }
                    ]
                },
                {
                    id: 'operations',
                    name: 'Operations',
                    children: [
                        { id: 'hr', name: 'Agreement' },
                        { id: 'finance', name: 'Earnings' }
                    ]
                }
            ]
        };

        let treeExpandedItems = { 'company': true };
        let treeSelectedItems = { 'company': true };

        function renderTreeItem(item, level = 0) {
            const hasChildren = item.children && item.children.length > 0;
            const isExpanded = treeExpandedItems[item.id];
            const isSelected = treeSelectedItems[item.id];
            const indent = level * 16;

            let html = `
                <div class="tree-item ${isSelected ? 'selected' : ''}" style="padding-left: ${indent + 8}px" onclick="toggleTreeItem('${item.id}', ${level === 1})">
                    ${hasChildren ? `<i data-lucide="${isExpanded ? 'chevron-down' : 'chevron-right'}" class="tree-folder-icon"></i>` : '<span class="w-3.5"></span>'}
                    <i data-lucide="${hasChildren ? (isExpanded ? 'folder-open' : 'folder') : 'file-text'}" class="w-3.5 h-3.5 ${hasChildren ? 'text-neutral-500' : 'text-neutral-400'}"></i>
                    <span>${item.name}</span>
                </div>
            `;

            if (hasChildren) {
                html += `<div class="tree-children ${isExpanded ? 'expanded' : ''}">`;
                item.children.forEach(child => {
                    html += renderTreeItem(child, level + 1);
                });
                html += `</div>`;
            }

            return html;
        }

        function toggleTreeItem(id, isTopLevel) {
            // Accordion behavior for top-level items
            if (isTopLevel && !treeExpandedItems[id]) {
                // Collapse all other top-level items
                technicalTreeData.children.forEach(child => {
                    if (child.id !== id) treeExpandedItems[child.id] = false;
                });
            }

            treeExpandedItems[id] = !treeExpandedItems[id];
            treeSelectedItems = { [id]: true };
            
            const root = document.getElementById('tree-root');
            root.innerHTML = renderTreeItem(technicalTreeData);
            lucide.createIcons();
        }

        let currentServiceIndex = 0;
        let currentSlideIndex = 0;

        function scrambleText(element, targetText, duration = 1.0) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+';
            // Use data-original if it exists to prevent capturing scrambled state
            const originalText = element.getAttribute('data-original') || targetText;
            
            // Clear any existing scramble interval on this element
            if (element._scrambleInterval) {
                clearInterval(element._scrambleInterval);
            }
            
            let iteration = 0;
            element._scrambleInterval = setInterval(() => {
                element.innerText = originalText
                    .split('')
                    .map((char, index) => {
                        if (index < iteration) {
                            return originalText[index];
                        }
                        return chars[Math.floor(Math.random() * chars.length)];
                    })
                    .join('');

                if (iteration >= originalText.length) {
                    clearInterval(element._scrambleInterval);
                    element.innerText = originalText;
                    delete element._scrambleInterval;
                }
                iteration += originalText.length / (duration * 60);
            }, 30);
        }

        function animateText(elementId, text, preserveClasses = false) {
            const el = document.getElementById(elementId);
            if (!el) return; // Safety check
            el.innerHTML = '';
            
            if (preserveClasses) {
                // For elements that already have their own classes (like h2 headline)
                [...text].forEach((char, i) => {
                    const span = document.createElement('span');
                    span.textContent = char === ' ' ? '\u00A0' : char;
                    span.className = 'char-slide';
                    span.style.animationDelay = `${i * 0.02}s`; 
                    el.appendChild(span);
                });
            } else {
                // For carousel titles that need wrapper with size classes
                const wrapper = document.createElement('span');
                wrapper.className = 'text-3xl md:text-4xl';
                [...text].forEach((char, i) => {
                    const span = document.createElement('span');
                    span.textContent = char === ' ' ? '\u00A0' : char;
                    span.className = 'char-slide';
                    span.style.animationDelay = `${i * 0.02}s`; 
                    wrapper.appendChild(span);
                });
                el.appendChild(wrapper);
            }
        }

        function updateSlideContent(isServiceChange = false) {
            const data = serviceData[currentServiceIndex];
            const slide = data.slides[currentSlideIndex];
            const indicatorEl = document.getElementById('slide-indicator');
            
            if (indicatorEl) indicatorEl.innerText = `${currentSlideIndex + 1}/${data.slides.length}`;
            
            // Elements to fade
            const titleEl = document.getElementById('service-poster-title');
            const nodeViz = document.getElementById('service-node-visualization');
            const starViz = document.getElementById('service-star-visualization');
            const intelligentViz = document.getElementById('service-intelligent-visualization');
            const strategicViz = document.getElementById('service-strategic-visualization');
            const pragmaticViz = document.getElementById('service-pragmatic-visualization');
            const adaptiveViz = document.getElementById('service-adaptive-visualization');
            const foundationalViz = document.getElementById('service-foundational-visualization');
            const appliedViz = document.getElementById('service-applied-visualization');
            const technicalViz = document.getElementById('service-technical-visualization');
            const compliantViz = document.getElementById('service-compliant-visualization');
            const protectedViz = document.getElementById('service-protected-visualization');
            const auditableViz = document.getElementById('service-auditable-visualization');
            const subtextContainer = document.getElementById('service-left-subtext-container');
            const subtextEl = document.getElementById('service-left-subtext');
            const categoryEl = document.getElementById('service-category');
            const mainTitleEl = document.getElementById('service-main-title');
            const detailsEl = document.getElementById('service-right-details');
            
            // Fade out
            if (titleEl) titleEl.style.opacity = '0';
            if (nodeViz) nodeViz.style.opacity = '0';
            if (starViz) starViz.style.opacity = '0';
            if (intelligentViz) intelligentViz.style.opacity = '0';
            if (strategicViz) strategicViz.style.opacity = '0';
            if (pragmaticViz) pragmaticViz.style.opacity = '0';
            if (adaptiveViz) adaptiveViz.style.opacity = '0';
            if (foundationalViz) foundationalViz.style.opacity = '0';
            if (appliedViz) appliedViz.style.opacity = '0';
            if (technicalViz) technicalViz.style.opacity = '0';
            if (compliantViz) compliantViz.style.opacity = '0';
            if (protectedViz) protectedViz.style.opacity = '0';
            if (auditableViz) auditableViz.style.opacity = '0';
            if (subtextContainer) subtextContainer.style.opacity = '0';
            
            // Update content after fade out
            setTimeout(() => {
                // Update title
                animateText('service-poster-title', slide.title);
                if (categoryEl) categoryEl.innerText = slide.category;
                
                // Show/hide node visualization for SECURE slide
                if (nodeViz) {
                    if (slide.title === 'SECURE') {
                        nodeViz.classList.remove('hidden');
                    } else {
                        nodeViz.classList.add('hidden');
                    }
                }
                
                // Show/hide star visualization for BEAUTIFUL slide
                if (starViz) {
                    const starContainer = starViz.querySelector('.clipped-star-container');
                    if (slide.title === 'BEAUTIFUL' && data.name === 'Development') {
                        starViz.classList.remove('hidden');
                        if (starContainer) starContainer.classList.remove('expanded');
                    } else {
                        starViz.classList.add('hidden');
                        if (starContainer) starContainer.classList.remove('expanded');
                    }
                }

                // Show/hide node visualization for INTELLIGENT slide
                if (intelligentViz) {
                    if (slide.title === 'INTELLIGENT' && data.name === 'Development') {
                        intelligentViz.classList.remove('hidden');
                    } else {
                        intelligentViz.classList.add('hidden');
                    }
                }

                // Show/hide strategic graph for STRATEGIC slide (Consulting)
                if (strategicViz) {
                    if (slide.title === 'STRATEGIC' && data.name === 'Consulting') {
                        strategicViz.classList.remove('hidden');
                        const progressCircles = strategicViz.querySelectorAll('.progress-circle');
                        progressCircles.forEach((circle) => {
                            circle.style.animation = 'none';
                            circle.getBoundingClientRect();
                            circle.style.animation = '';
                        });
                    } else {
                        strategicViz.classList.add('hidden');
                    }
                }

                // Show/hide pragmatic timeline for PRAGMATIC slide (Consulting)
                if (pragmaticViz) {
                    if (slide.title === 'PRAGMATIC' && data.name === 'Consulting') {
                        pragmaticViz.classList.remove('hidden');
                        const timeline = pragmaticViz.querySelector('.pragmatic-timeline');
                        if (timeline) {
                            timeline.classList.remove('is-animating');
                            timeline.getBoundingClientRect();
                            timeline.classList.add('is-animating');
                        }
                    } else {
                        pragmaticViz.classList.add('hidden');
                    }
                }

                // Show/hide adaptive Lottie for ADAPTIVE slide (Consulting)
                if (adaptiveViz) {
                    if (slide.title === 'ADAPTIVE' && data.name === 'Consulting') {
                        adaptiveViz.classList.remove('hidden');
                        if (adaptiveLottieAnim) adaptiveLottieAnim.goToAndPlay(0, true);
                    } else {
                        adaptiveViz.classList.add('hidden');
                        if (adaptiveLottieAnim) adaptiveLottieAnim.stop();
                    }
                }

                // Show/hide foundational Lottie for FOUNDATIONAL slide (Training)
                if (foundationalViz) {
                    if (slide.title === 'FOUNDATIONAL' && data.name === 'Training') {
                        foundationalViz.classList.remove('hidden');
                        if (foundationalLottieAnim) foundationalLottieAnim.goToAndPlay(0, true);
                    } else {
                        foundationalViz.classList.add('hidden');
                        if (foundationalLottieAnim) foundationalLottieAnim.stop();
                    }
                }

                // Show/hide applied Lottie for APPLIED slide (Training)
                if (appliedViz) {
                    if (slide.title === 'APPLIED' && data.name === 'Training') {
                        appliedViz.classList.remove('hidden');
                        if (appliedLottieAnim) appliedLottieAnim.goToAndPlay(0, true);
                    } else {
                        appliedViz.classList.add('hidden');
                        if (appliedLottieAnim) appliedLottieAnim.stop();
                    }
                }

                // Show/hide technical Tree for TECHNICAL slide (Training)
                if (technicalViz) {
                    if (slide.title === 'TECHNICAL' && data.name === 'Training') {
                        technicalViz.classList.remove('hidden');
                        treeExpandedItems = { 'company': true };
                        treeSelectedItems = { 'company': true };
                        const root = document.getElementById('tree-root');
                        if (root) {
                            root.innerHTML = renderTreeItem(technicalTreeData);
                            if (window.lucide) lucide.createIcons();
                        }
                    } else {
                        technicalViz.classList.add('hidden');
                    }
                }

                // Show/hide compliant Lottie for COMPLIANT slide (Governance)
                if (compliantViz) {
                    if (slide.title === 'COMPLIANT' && data.name === 'Governance') {
                        compliantViz.classList.remove('hidden');
                        if (compliantLottieAnim) compliantLottieAnim.goToAndPlay(0, true);
                    } else {
                        compliantViz.classList.add('hidden');
                        if (compliantLottieAnim) compliantLottieAnim.stop();
                    }
                }

                // Show/hide protected Lottie for PROTECTED slide (Governance)
                if (protectedViz) {
                    if (slide.title === 'PROTECTED' && data.name === 'Governance') {
                        protectedViz.classList.remove('hidden');
                        if (protectedLottieAnim) protectedLottieAnim.goToAndPlay(0, true);
                    } else {
                        protectedViz.classList.add('hidden');
                        if (protectedLottieAnim) protectedLottieAnim.stop();
                    }
                }

                // Show/hide auditable Lottie for AUDITABLE slide (Governance)
                if (auditableViz) {
                    if (slide.title === 'AUDITABLE' && data.name === 'Governance') {
                        auditableViz.classList.remove('hidden');
                        if (auditableLottieAnim) auditableLottieAnim.goToAndPlay(0, true);
                    } else {
                        auditableViz.classList.add('hidden');
                        if (auditableLottieAnim) auditableLottieAnim.stop();
                    }
                }

                // Update subtext
                if (subtextContainer && subtextEl) {
                    subtextContainer.classList.remove('hidden');
                    subtextContainer.classList.remove('mb-8');
                    subtextEl.innerText = slide.subtext;
                    subtextContainer.classList.remove('mt-2', 'mt-4', 'mt-6', 'mt-7', 'mt-8');
                    subtextContainer.classList.add('mt-2');
                    subtextEl.classList.remove('translate-y-4', 'translate-y-6', 'translate-y-8');
                    
                    if (slide.title === 'STRATEGIC' && data.name === 'Consulting') {
                        subtextContainer.classList.remove('mt-2');
                        subtextContainer.classList.add('mt-4');
                        subtextEl.classList.add('translate-y-4');
                    } else if (slide.title === 'PRAGMATIC' && data.name === 'Consulting') {
                        subtextContainer.classList.remove('mt-2');
                        subtextContainer.classList.add('mt-8');
                        subtextEl.classList.add('translate-y-8');
                    } else if (slide.title === 'FOUNDATIONAL' && data.name === 'Training') {
                        subtextContainer.classList.remove('mt-2');
                        subtextContainer.classList.add('mt-8');
                        subtextEl.classList.add('translate-y-8');
                    } else if (slide.title === 'APPLIED' && data.name === 'Training') {
                        subtextContainer.classList.remove('mt-2');
                        subtextContainer.classList.add('mt-6');
                        subtextEl.classList.add('translate-y-6');
                    } else if (slide.title === 'TECHNICAL' && data.name === 'Training') {
                        subtextContainer.classList.remove('mt-2');
                        subtextContainer.classList.add('mt-7', 'mb-8');
                        subtextEl.classList.add('translate-y-8');
                    } else if (slide.title === 'COMPLIANT' && data.name === 'Governance') {
                        subtextContainer.classList.remove('mt-2');
                        subtextContainer.classList.add('mt-8');
                        subtextEl.classList.add('translate-y-8');
                    } else if (slide.title === 'PROTECTED' && data.name === 'Governance') {
                        subtextContainer.classList.remove('mt-2');
                        subtextContainer.classList.add('mt-8');
                        subtextEl.classList.add('translate-y-8');
                    } else if (slide.title === 'AUDITABLE' && data.name === 'Governance') {
                        subtextContainer.classList.remove('mt-2');
                        subtextContainer.classList.add('mt-8');
                        subtextEl.classList.add('translate-y-8');
                    }
                    
                    // Adjust subtext position per slide
                    subtextEl.classList.remove('-top-6', 'top-0', '-top-2', 'top-[4.5rem]', 'top-2', 'top-8', 'top-20', 'top-10', 'top-12', 'top-14', 'top-18', 'top-24', 'top-[4.75rem]');
                    if (slide.title === 'SECURE') {
                        subtextEl.classList.add('top-0');
                    } else if (slide.title === 'FOUNDATIONAL' && data.name === 'Training') {
                        subtextEl.classList.add('top-8');
                    } else if (slide.title === 'APPLIED' && data.name === 'Training') {
                        subtextEl.classList.add('top-12');
                    } else if (slide.title === 'TECHNICAL' && data.name === 'Training') {
                        subtextEl.classList.add('top-14');
                    } else if (slide.title === 'COMPLIANT' && data.name === 'Governance') {
                        subtextEl.classList.add('top-14');
                    } else if (slide.title === 'PROTECTED' && data.name === 'Governance') {
                        subtextEl.classList.add('top-14');
                    } else if (slide.title === 'AUDITABLE' && data.name === 'Governance') {
                        subtextEl.classList.add('top-14');
                    } else if (slide.title === 'ADAPTIVE' && data.name === 'Consulting') {
                        subtextEl.classList.add('top-[4.5rem]');
                    } else {
                        subtextEl.classList.add('-top-6');
                    }
                }
                
                // Fade in
                setTimeout(() => {
                    if (titleEl) titleEl.style.opacity = '1';
                    if (nodeViz && !nodeViz.classList.contains('hidden')) nodeViz.style.opacity = '1';
                    if (starViz && !starViz.classList.contains('hidden')) starViz.style.opacity = '1';
                    if (intelligentViz && !intelligentViz.classList.contains('hidden')) intelligentViz.style.opacity = '1';
                    if (strategicViz && !strategicViz.classList.contains('hidden')) strategicViz.style.opacity = '1';
                    if (pragmaticViz && !pragmaticViz.classList.contains('hidden')) pragmaticViz.style.opacity = '1';
                    if (adaptiveViz && !adaptiveViz.classList.contains('hidden')) adaptiveViz.style.opacity = '1';
                    if (foundationalViz && !foundationalViz.classList.contains('hidden')) foundationalViz.style.opacity = '1';
                    if (appliedViz && !appliedViz.classList.contains('hidden')) appliedViz.style.opacity = '1';
                    if (technicalViz && !technicalViz.classList.contains('hidden')) technicalViz.style.opacity = '1';
                    if (compliantViz && !compliantViz.classList.contains('hidden')) compliantViz.style.opacity = '1';
                    if (protectedViz && !protectedViz.classList.contains('hidden')) protectedViz.style.opacity = '1';
                    if (auditableViz && !auditableViz.classList.contains('hidden')) auditableViz.style.opacity = '1';
                    if (subtextContainer) subtextContainer.style.opacity = '1';
                }, 10);
            }, 200);
            
            // Update Right Side (Static - doesn't change with carousel)
            const rightContent = document.getElementById('service-right-content');
            
            if (isServiceChange && rightContent) {
                gsap.to(rightContent, {
                    opacity: 0,
                    x: 20,
                    duration: 0.3,
                    ease: "power2.in",
                    onComplete: () => {
                        if (mainTitleEl) mainTitleEl.innerHTML = data.suffix;
                        if (detailsEl) {
                            detailsEl.innerHTML = `
                                <div>
                                    <p class="text-[10px] font-bold text-neutral-500 uppercase mb-2 tracking-wide">Services Offered</p>
                                    <p class="text-ink text-lg leading-relaxed">${data.staticDescription}</p>
                                </div>
                            `;
                        }
                        gsap.fromTo(rightContent, 
                            { opacity: 0, x: -20 },
                            { opacity: 1, x: 0, duration: 0.5, ease: "power2.out", delay: 0.1 }
                        );
                    }
                });
            } else {
                if (mainTitleEl) mainTitleEl.innerHTML = data.suffix;
                if (detailsEl) {
                    detailsEl.innerHTML = `
                        <div>
                            <p class="text-[10px] font-bold text-neutral-500 uppercase mb-2 tracking-wide">Services Offered</p>
                            <p class="text-ink text-lg leading-relaxed">${data.staticDescription}</p>
                        </div>
                    `;
                }
            }
        }

        function updateService(index) {
            currentServiceIndex = index;
            currentSlideIndex = 0; // Reset slide index when changing service
            const data = serviceData[index];
            const bg = document.getElementById('service-bg');
            const headline = document.getElementById('service-headline');
            
            bg.classList.add('opacity-0');
            bg.classList.remove('opacity-70');
            
            setTimeout(() => {
                bg.style.backgroundImage = `url('${data.image}')`;
                bg.classList.remove('opacity-0');
                bg.classList.add('opacity-70');
            }, 250);

            // Animate headline change with character-by-character animation
            animateText('service-headline', data.headline, true);

            document.getElementById('service-poster-num').innerText = data.posterNum;
            
            updateSlideContent(true);
            
            const tabs = document.querySelectorAll('.service-tab');
            tabs.forEach((tab, i) => {
                if (i === index) {
                    tab.classList.add('active');
                    const label = tab.querySelector('.tab-label');
                    if (label) scrambleText(label, label.innerText, 0.2);
                } else {
                    tab.classList.remove('active');
                }
            });
        }

        function nextSlide() {
            const data = serviceData[currentServiceIndex];
            currentSlideIndex = (currentSlideIndex + 1) % data.slides.length;
            updateSlideContent();
        }

        function prevSlide() {
            const data = serviceData[currentServiceIndex];
            currentSlideIndex = (currentSlideIndex - 1 + data.slides.length) % data.slides.length;
            updateSlideContent();
        }

        function toggleStarExpansion(element) {
            element.classList.toggle('expanded');
        }

        // Add scramble effect to service tabs on hover
        document.querySelectorAll('.service-tab-item').forEach(tab => {
            const label = tab.querySelector('.tab-label');
            if (label) {
                tab.addEventListener('mouseenter', () => {
                    // Only scramble if it's not the active tab (since active already scrambles on click)
                    if (!tab.classList.contains('active')) {
                        scrambleText(label, label.innerText, 0.2);
                    }
                });
            }
        });

        updateService(0);

        // --- Page Transitions ---
        const homePage = document.getElementById('home-page');
        const servicesPage = document.getElementById('services-page');
        const worksPage = document.getElementById('works-page');
        const aboutPage = document.getElementById('about-page');
        const heroBlock = document.getElementById('hero-block');
        const btnStartDesktop = document.getElementById('btn-start-desktop');
        const btnStartMobile = document.getElementById('btn-start-mobile');
        const navServices = document.getElementById('nav-services');
        const navWorks = document.getElementById('nav-works');
        const navAbout = document.getElementById('nav-about');
        const mobileServices = document.getElementById('mobile-services');
        const mobileWorks = document.getElementById('mobile-works');
        const mobileAbout = document.getElementById('mobile-about');
        const logoHome = document.getElementById('logo-home');

        let currentPage = 'home';
        let isAnimating = false;

        function showPage(targetPageId) {
            const pages = {
                'home': homePage,
                'services': servicesPage,
                'works': worksPage,
                'about': aboutPage
            };
            Object.keys(pages).forEach(key => {
                if (key === targetPageId) {
                    pages[key].style.display = 'block';
                    pages[key].style.pointerEvents = 'auto';
                } else {
                    pages[key].style.display = 'none';
                    pages[key].style.pointerEvents = 'none';
                }
            });
        }

        function goToServices() {
            if (currentPage === 'services' || isAnimating) return;
            isAnimating = true;
            const prevPageId = currentPage;
            currentPage = 'services';
            const tl = gsap.timeline({ 
                defaults: { ease: "power2.out" },
                onComplete: () => { isAnimating = false; }
            });

            // Exit Logic
            if (prevPageId === 'home') {
                tl.to(heroBlock, { opacity: 0, y: -40, duration: 0.6 }, 0);
            } else if (prevPageId === 'works') {
                tl.to(worksPage, { opacity: 0, y: -30, duration: 1.0 }, 0);
            } else if (prevPageId === 'about') {
                tl.to(aboutPage, { opacity: 0, y: -30, duration: 1.0 }, 0);
            }
            
            // Orb Scale UP and Rotate
            tl.to(uniforms.uOpacity, { value: 0, duration: 2.5 }, 0);
            tl.to(transitionRotationY, { 
                value: transitionRotationY.value + Math.PI * 2, 
                duration: 3.0 
            }, 0);
            tl.to(systemsGroup.scale, { x: 3.0, y: 3.0, z: 3.0, duration: 3.0 }, 0);
            tl.to(systemsGroup.position, { z: 8, duration: 3.0 }, 0);

            tl.add(() => {
                showPage('services');
                const headline = document.getElementById('service-headline');
                if (headline) scrambleText(headline, headline.innerText, 0.6);
            }, 0.8);
            tl.fromTo(servicesPage, { opacity: 0, y: 40 }, { opacity: 1, y: 0, duration: 1.8 }, 1.0);
            
            tl.add(() => { initInViewAnimations(); });
        }

        function goToWorks() {
            if (currentPage === 'works' || isAnimating) return;
            isAnimating = true;
            const prevPageId = currentPage;
            currentPage = 'works';
            
            const tl = gsap.timeline({ 
                defaults: { ease: "power2.out" },
                onComplete: () => { isAnimating = false; }
            });

            // Exit Logic for previous pages
            if (prevPageId === 'home') {
                tl.to(heroBlock, { opacity: 0, y: -40, duration: 0.6 }, 0);
            } else if (prevPageId === 'services') {
                tl.to(servicesPage, { opacity: 0, y: -30, duration: 0.8 }, 0);
            } else if (prevPageId === 'about') {
                tl.to(aboutPage, { opacity: 0, y: -30, duration: 0.8 }, 0);
            }

            // Orb Logic for Works
            tl.to(uniforms.uOpacity, { value: 0, duration: 1.5 }, 0);
            tl.to(transitionRotationY, { 
                value: transitionRotationY.value + Math.PI * 1.5, 
                duration: 2.0 
            }, 0);
            tl.to(systemsGroup.scale, { x: 2.5, y: 2.5, z: 6.0, duration: 2.0 }, 0);
            tl.to(systemsGroup.position, { z: 4, duration: 2.0 }, 0);

            tl.add(() => {
                showPage('works');
                
                // Selection
                const worksIntro = document.getElementById('works-intro');
                const worksFourThings = document.getElementById('works-four-things');
                const worksSelectedLabel = document.getElementById('works-selected-label');
                const worksTitleDigital = document.getElementById('works-title-digital');
                const worksTitleRenaissance = document.getElementById('works-title-renaissance');
                const pillars = document.querySelectorAll('.works-pillar');
                const cards = document.querySelectorAll('.works-card');

                // Reset/Set Initial States
                const animElements = [...pillars, ...cards];
                if (worksIntro) animElements.push(worksIntro);
                
                gsap.set(animElements, { opacity: 0 });
                gsap.set(pillars, { y: 20 });
                gsap.set(cards, { y: 30, scale: 0.95, filter: "blur(10px)" });

                // Content Scrambles
                if (worksFourThings) scrambleText(worksFourThings, worksFourThings.innerText, 0.6);
                if (worksSelectedLabel) scrambleText(worksSelectedLabel, worksSelectedLabel.innerText, 0.6);
                if (worksTitleDigital) scrambleText(worksTitleDigital, worksTitleDigital.innerText, 0.6);
                if (worksTitleRenaissance) scrambleText(worksTitleRenaissance, worksTitleRenaissance.innerText, 0.6);

                // Entrance Fades & Movements
                if (worksIntro) gsap.to(worksIntro, { opacity: 1, duration: 0.6 });
                
                gsap.to(cards, { 
                    opacity: 1, 
                    y: 0, 
                    scale: 1,
                    filter: "blur(0px)",
                    duration: 1.0, 
                    stagger: 0.08, 
                    ease: "power3.out"
                });

                gsap.to(pillars, { 
                    y: 0, 
                    opacity: 1, 
                    duration: 0.6, 
                    stagger: 0.1, 
                    ease: "power2.out"
                });

            }, 0.6);
            
            tl.fromTo(worksPage, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 1.2 }, 0.7);
        }

        function goToAbout() {
            if (currentPage === 'about' || isAnimating) return;
            isAnimating = true;
            const prevPageId = currentPage;
            currentPage = 'about';
            const tl = gsap.timeline({ 
                defaults: { ease: "power2.out" },
                onComplete: () => { isAnimating = false; }
            });

            if (prevPageId === 'home') {
                 tl.to(heroBlock, { opacity: 0, y: -40, duration: 0.6 }, 0);
            } else if (prevPageId === 'services') {
                tl.to(servicesPage, { opacity: 0, y: -30, duration: 1.0 }, 0);
            } else if (prevPageId === 'works') {
                tl.to(worksPage, { opacity: 0, y: -30, duration: 1.0 }, 0);
            }

            tl.add(() => showPage('about'));
            tl.fromTo(aboutPage, { opacity: 0, y: 40 }, { opacity: 1, y: 0, duration: 1.5 }, "<");
            
            // Orb Spin and Hide
            tl.to(transitionRotationY, { 
                value: transitionRotationY.value + Math.PI * 2, 
                duration: 2.5 
            }, 0);
            tl.to(systemsGroup.scale, { x: 2.0, y: 2.0, z: 2.0, duration: 2.5 }, 0);
            tl.to(uniforms.uOpacity, { value: 0, duration: 1.5 }, 0);
        }

        function goToHome() {
            if (currentPage === 'home' || isAnimating) return;
            isAnimating = true;
            const prevPageId = currentPage;
            currentPage = 'home';
            const tl = gsap.timeline({ 
                defaults: { ease: "power2.out" },
                onComplete: () => { isAnimating = false; }
            });

            if (prevPageId === 'services') {
                tl.to(servicesPage, { opacity: 0, y: -20, duration: 1.0 }, 0);
            } else if (prevPageId === 'works') {
                tl.to(worksPage, { opacity: 0, y: -20, duration: 1.0 }, 0);
            } else if (prevPageId === 'about') {
                tl.to(aboutPage, { opacity: 0, y: -20, duration: 1.0 }, 0);
            }

            tl.add(() => {
                showPage('home');
                adjustLayout();
            }, 0.6);
            
            tl.to(uniforms.uOpacity, { value: 0.8, duration: 2.0 }, 0.6);
            tl.fromTo(heroBlock, { opacity: 0, y: 30 }, { opacity: 1, y: 0, duration: 1.5 }, 0.8);
        }

        // --- Mouse Wheel / Scroll Navigation ---
        let lastScrollTime = 0;
        const scrollCooldown = 800;

        window.addEventListener('wheel', (e) => {
            const now = Date.now();
            if (now - lastScrollTime < scrollCooldown) return;

            if (e.deltaY > 50) {
                if (currentPage === 'home') {
                    goToServices();
                    lastScrollTime = now;
                } else if (currentPage === 'services') {
                    // Check if scrolled to bottom of services page
                    if (servicesPage.scrollHeight - servicesPage.scrollTop <= servicesPage.clientHeight + 1) {
                        goToWorks();
                        lastScrollTime = now;
                    }
                } else if (currentPage === 'works') {
                    // Check if scrolled to bottom of works page
                    if (worksPage.scrollHeight - worksPage.scrollTop <= worksPage.clientHeight + 1) {
                        goToAbout();
                        lastScrollTime = now;
                    }
                }
            } else if (e.deltaY < -50) {
                if (currentPage === 'about' && aboutPage.scrollTop <= 0) {
                    goToWorks();
                    lastScrollTime = now;
                } else if (currentPage === 'works' && worksPage.scrollTop <= 0) {
                    goToServices();
                    lastScrollTime = now;
                } else if (currentPage === 'services' && servicesPage.scrollTop <= 0) {
                    goToHome();
                    lastScrollTime = now;
                }
            }
        }, { passive: true });

        // --- Touch Navigation ---
        let touchStartY = 0;
        window.addEventListener('touchstart', (e) => {
            touchStartY = e.touches[0].clientY;
        }, { passive: true });

        window.addEventListener('touchend', (e) => {
            const touchEndY = e.changedTouches[0].clientY;
            const deltaY = touchStartY - touchEndY;

            if (Math.abs(deltaY) > 50) {
                if (deltaY > 0) { // Swipe Up
                    if (currentPage === 'home') goToServices();
                    else if (currentPage === 'services' && servicesPage.scrollHeight - servicesPage.scrollTop <= servicesPage.clientHeight + 1) goToWorks();
                    else if (currentPage === 'works' && worksPage.scrollHeight - worksPage.scrollTop <= worksPage.clientHeight + 1) goToAbout();
                } else { // Swipe Down
                    if (currentPage === 'about' && aboutPage.scrollTop <= 0) goToWorks();
                    else if (currentPage === 'works' && worksPage.scrollTop <= 0) goToServices();
                    else if (currentPage === 'services' && servicesPage.scrollTop <= 0) goToHome();
                }
            }
        }, { passive: true });

        navServices?.addEventListener('click', (e) => { e.preventDefault(); goToServices(); });
        navWorks?.addEventListener('click', (e) => { e.preventDefault(); goToWorks(); });
        navAbout?.addEventListener('click', (e) => { e.preventDefault(); goToAbout(); });
        mobileServices?.addEventListener('click', (e) => { e.preventDefault(); goToServices(); toggleMenu(); });
        mobileWorks?.addEventListener('click', (e) => { e.preventDefault(); goToWorks(); toggleMenu(); });
        mobileAbout?.addEventListener('click', (e) => { e.preventDefault(); goToAbout(); toggleMenu(); });
        btnStartDesktop?.addEventListener('click', (e) => { e.preventDefault(); goToServices(); });
        btnStartMobile?.addEventListener('click', (e) => { e.preventDefault(); goToServices(); });
        logoHome?.addEventListener('click', (e) => { e.preventDefault(); goToHome(); });

    </script>

</body></html>
